import{onAuthStateChanged as rf,getAuth as Qm,createUserWithEmailAndPassword as Ym,signInWithEmailAndPassword as qm,GoogleAuthProvider as Xm,signInWithPopup as Jm}from"firebase/auth";import{initializeApp as Zm}from"firebase/app";import{getFirestore as eg,enableIndexedDbPersistence as tg,doc as sr,setDoc as ls,serverTimestamp as ng,deleteDoc as qn,query as hn,collection as Ce,orderBy as Ss,limit as sf,onSnapshot as or,addDoc as an,where as ii,Timestamp as qu,getDocs as pl}from"firebase/firestore";import{getStorage as rg,ref as ig,uploadBytes as sg,getDownloadURL as og}from"firebase/storage";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function lg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var of={exports:{}},ro={},lf={exports:{}},b={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ri=Symbol.for("react.element"),ag=Symbol.for("react.portal"),ug=Symbol.for("react.fragment"),cg=Symbol.for("react.strict_mode"),dg=Symbol.for("react.profiler"),fg=Symbol.for("react.provider"),hg=Symbol.for("react.context"),pg=Symbol.for("react.forward_ref"),mg=Symbol.for("react.suspense"),gg=Symbol.for("react.memo"),_g=Symbol.for("react.lazy"),Xu=Symbol.iterator;function yg(t){return t===null||typeof t!="object"?null:(t=Xu&&t[Xu]||t["@@iterator"],typeof t=="function"?t:null)}var af={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uf=Object.assign,cf={};function vr(t,e,n){this.props=t,this.context=e,this.refs=cf,this.updater=n||af}vr.prototype.isReactComponent={};vr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function df(){}df.prototype=vr.prototype;function Pa(t,e,n){this.props=t,this.context=e,this.refs=cf,this.updater=n||af}var Da=Pa.prototype=new df;Da.constructor=Pa;uf(Da,vr.prototype);Da.isPureReactComponent=!0;var Ju=Array.isArray,ff=Object.prototype.hasOwnProperty,Aa={current:null},hf={key:!0,ref:!0,__self:!0,__source:!0};function pf(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ff.call(e,r)&&!hf.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ri,type:t,key:s,ref:o,props:i,_owner:Aa.current}}function vg(t,e){return{$$typeof:Ri,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oa(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ri}function wg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zu=/\/+/g;function Do(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wg(""+t.key):e.toString(36)}function as(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ri:case ag:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Do(o,0):r,Ju(i)?(n="",t!=null&&(n=t.replace(Zu,"$&/")+"/"),as(i,e,n,"",function(u){return u})):i!=null&&(Oa(i)&&(i=vg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Zu,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ju(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Do(s,l);o+=as(s,e,n,a,i)}else if(a=yg(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Do(s,l++),o+=as(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bi(t,e,n){if(t==null)return t;var r=[],i=0;return as(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Sg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Te={current:null},us={transition:null},Eg={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:us,ReactCurrentOwner:Aa};function mf(){throw Error("act(...) is not supported in production builds of React.")}b.Children={map:Bi,forEach:function(t,e,n){Bi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bi(t,function(){e++}),e},toArray:function(t){return Bi(t,function(e){return e})||[]},only:function(t){if(!Oa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};b.Component=vr;b.Fragment=ug;b.Profiler=dg;b.PureComponent=Pa;b.StrictMode=cg;b.Suspense=mg;b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eg;b.act=mf;b.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uf({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Aa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)ff.call(e,a)&&!hf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ri,type:t.type,key:i,ref:s,props:r,_owner:o}};b.createContext=function(t){return t={$$typeof:hg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fg,_context:t},t.Consumer=t};b.createElement=pf;b.createFactory=function(t){var e=pf.bind(null,t);return e.type=t,e};b.createRef=function(){return{current:null}};b.forwardRef=function(t){return{$$typeof:pg,render:t}};b.isValidElement=Oa;b.lazy=function(t){return{$$typeof:_g,_payload:{_status:-1,_result:t},_init:Sg}};b.memo=function(t,e){return{$$typeof:gg,type:t,compare:e===void 0?null:e}};b.startTransition=function(t){var e=us.transition;us.transition={};try{t()}finally{us.transition=e}};b.unstable_act=mf;b.useCallback=function(t,e){return Te.current.useCallback(t,e)};b.useContext=function(t){return Te.current.useContext(t)};b.useDebugValue=function(){};b.useDeferredValue=function(t){return Te.current.useDeferredValue(t)};b.useEffect=function(t,e){return Te.current.useEffect(t,e)};b.useId=function(){return Te.current.useId()};b.useImperativeHandle=function(t,e,n){return Te.current.useImperativeHandle(t,e,n)};b.useInsertionEffect=function(t,e){return Te.current.useInsertionEffect(t,e)};b.useLayoutEffect=function(t,e){return Te.current.useLayoutEffect(t,e)};b.useMemo=function(t,e){return Te.current.useMemo(t,e)};b.useReducer=function(t,e,n){return Te.current.useReducer(t,e,n)};b.useRef=function(t){return Te.current.useRef(t)};b.useState=function(t){return Te.current.useState(t)};b.useSyncExternalStore=function(t,e,n){return Te.current.useSyncExternalStore(t,e,n)};b.useTransition=function(){return Te.current.useTransition()};b.version="18.3.1";lf.exports=b;var P=lf.exports;const Cg=lg(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=P,kg=Symbol.for("react.element"),Ng=Symbol.for("react.fragment"),Ig=Object.prototype.hasOwnProperty,Tg=xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rg={key:!0,ref:!0,__self:!0,__source:!0};function gf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ig.call(e,r)&&!Rg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:kg,type:t,key:s,ref:o,props:i,_owner:Tg.current}}ro.Fragment=Ng;ro.jsx=gf;ro.jsxs=gf;of.exports=ro;var m=of.exports,_f={exports:{}},He={},yf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,A){var M=T.length;T.push(A);e:for(;0<M;){var ne=M-1>>>1,ue=T[ne];if(0<i(ue,A))T[ne]=A,T[M]=ue,M=ne;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var A=T[0],M=T.pop();if(M!==A){T[0]=M;e:for(var ne=0,ue=T.length,zi=ue>>>1;ne<zi;){var tn=2*(ne+1)-1,Po=T[tn],nn=tn+1,Ui=T[nn];if(0>i(Po,M))nn<ue&&0>i(Ui,Po)?(T[ne]=Ui,T[nn]=M,ne=nn):(T[ne]=Po,T[tn]=M,ne=tn);else if(nn<ue&&0>i(Ui,M))T[ne]=Ui,T[nn]=M,ne=nn;else break e}}return A}function i(T,A){var M=T.sortIndex-A.sortIndex;return M!==0?M:T.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,c=null,d=3,_=!1,y=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=T)r(u),A.sortIndex=A.expirationTime,e(a,A);else break;A=n(u)}}function w(T){if(v=!1,g(T),!y)if(n(a)!==null)y=!0,To(N);else{var A=n(u);A!==null&&Ro(w,A.startTime-T)}}function N(T,A){y=!1,v&&(v=!1,p(R),R=-1),_=!0;var M=d;try{for(g(A),c=n(a);c!==null&&(!(c.expirationTime>A)||T&&!we());){var ne=c.callback;if(typeof ne=="function"){c.callback=null,d=c.priorityLevel;var ue=ne(c.expirationTime<=A);A=t.unstable_now(),typeof ue=="function"?c.callback=ue:c===n(a)&&r(a),g(A)}else r(a);c=n(a)}if(c!==null)var zi=!0;else{var tn=n(u);tn!==null&&Ro(w,tn.startTime-A),zi=!1}return zi}finally{c=null,d=M,_=!1}}var E=!1,x=null,R=-1,X=5,O=-1;function we(){return!(t.unstable_now()-O<X)}function Nr(){if(x!==null){var T=t.unstable_now();O=T;var A=!0;try{A=x(!0,T)}finally{A?Ir():(E=!1,x=null)}}else E=!1}var Ir;if(typeof h=="function")Ir=function(){h(Nr)};else if(typeof MessageChannel<"u"){var Yu=new MessageChannel,Km=Yu.port2;Yu.port1.onmessage=Nr,Ir=function(){Km.postMessage(null)}}else Ir=function(){k(Nr,0)};function To(T){x=T,E||(E=!0,Ir())}function Ro(T,A){R=k(function(){T(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,To(N))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(T){switch(d){case 1:case 2:case 3:var A=3;break;default:A=d}var M=d;d=A;try{return T()}finally{d=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,A){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=d;d=T;try{return A()}finally{d=M}},t.unstable_scheduleCallback=function(T,A,M){var ne=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?ne+M:ne):M=ne,T){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=M+ue,T={id:f++,callback:A,priorityLevel:T,startTime:M,expirationTime:ue,sortIndex:-1},M>ne?(T.sortIndex=M,e(u,T),n(a)===null&&T===n(u)&&(v?(p(R),R=-1):v=!0,Ro(w,M-ne))):(T.sortIndex=ue,e(a,T),y||_||(y=!0,To(N))),T},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(T){var A=d;return function(){var M=d;d=A;try{return T.apply(this,arguments)}finally{d=M}}}})(vf);yf.exports=vf;var Pg=yf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=P,$e=Pg;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wf=new Set,si={};function kn(t,e){lr(t,e),lr(t+"Capture",e)}function lr(t,e){for(si[t]=e,t=0;t<e.length;t++)wf.add(e[t])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ml=Object.prototype.hasOwnProperty,Ag=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function Og(t){return ml.call(tc,t)?!0:ml.call(ec,t)?!1:Ag.test(t)?tc[t]=!0:(ec[t]=!0,!1)}function Mg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lg(t,e,n,r){if(e===null||typeof e>"u"||Mg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ve[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ve[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ve[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ve[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ve[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ve[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ve[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ve[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ve[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ma=/[\-:]([a-z])/g;function La(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ma,La);ve[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ma,La);ve[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ma,La);ve[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ve[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ve[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function ba(t,e,n,r){var i=ve.hasOwnProperty(e)?ve[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lg(e,n,i,r)&&(n=null),r||i===null?Og(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rt=Dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wi=Symbol.for("react.element"),Ln=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),Fa=Symbol.for("react.strict_mode"),gl=Symbol.for("react.profiler"),Sf=Symbol.for("react.provider"),Ef=Symbol.for("react.context"),ja=Symbol.for("react.forward_ref"),_l=Symbol.for("react.suspense"),yl=Symbol.for("react.suspense_list"),za=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Cf=Symbol.for("react.offscreen"),nc=Symbol.iterator;function Tr(t){return t===null||typeof t!="object"?null:(t=nc&&t[nc]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,Ao;function Ur(t){if(Ao===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ao=e&&e[1]||""}return`
`+Ao+t}var Oo=!1;function Mo(t,e){if(!t||Oo)return"";Oo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Oo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ur(t):""}function bg(t){switch(t.tag){case 5:return Ur(t.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return t=Mo(t.type,!1),t;case 11:return t=Mo(t.type.render,!1),t;case 1:return t=Mo(t.type,!0),t;default:return""}}function vl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bn:return"Fragment";case Ln:return"Portal";case gl:return"Profiler";case Fa:return"StrictMode";case _l:return"Suspense";case yl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ef:return(t.displayName||"Context")+".Consumer";case Sf:return(t._context.displayName||"Context")+".Provider";case ja:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case za:return e=t.displayName||null,e!==null?e:vl(t.type)||"Memo";case Dt:e=t._payload,t=t._init;try{return vl(t(e))}catch{}}return null}function Fg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vl(e);case 8:return e===Fa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jg(t){var e=xf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $i(t){t._valueTracker||(t._valueTracker=jg(t))}function kf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Es(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wl(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nf(t,e){e=e.checked,e!=null&&ba(t,"checked",e,!1)}function Sl(t,e){Nf(t,e);var n=Yt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?El(t,e.type,n):e.hasOwnProperty("defaultValue")&&El(t,e.type,Yt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ic(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function El(t,e,n){(e!=="number"||Es(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Br=Array.isArray;function Xn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(Br(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yt(n)}}function If(t,e){var n=Yt(e.value),r=Yt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hi,Rf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hi=Hi||document.createElement("div"),Hi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zg=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(t){zg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vr[e]=Vr[t]})});function Pf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vr.hasOwnProperty(t)&&Vr[t]?(""+e).trim():e+"px"}function Df(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ug=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kl(t,e){if(e){if(Ug[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function Nl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=null;function Ua(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tl=null,Jn=null,Zn=null;function lc(t){if(t=Ai(t)){if(typeof Tl!="function")throw Error(S(280));var e=t.stateNode;e&&(e=ao(e),Tl(t.stateNode,t.type,e))}}function Af(t){Jn?Zn?Zn.push(t):Zn=[t]:Jn=t}function Of(){if(Jn){var t=Jn,e=Zn;if(Zn=Jn=null,lc(t),e)for(t=0;t<e.length;t++)lc(e[t])}}function Mf(t,e){return t(e)}function Lf(){}var Lo=!1;function bf(t,e,n){if(Lo)return t(e,n);Lo=!0;try{return Mf(t,e,n)}finally{Lo=!1,(Jn!==null||Zn!==null)&&(Lf(),Of())}}function li(t,e){var n=t.stateNode;if(n===null)return null;var r=ao(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Rl=!1;if(Ct)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){Rl=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{Rl=!1}function Bg(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var Gr=!1,Cs=null,xs=!1,Pl=null,Wg={onError:function(t){Gr=!0,Cs=t}};function $g(t,e,n,r,i,s,o,l,a){Gr=!1,Cs=null,Bg.apply(Wg,arguments)}function Hg(t,e,n,r,i,s,o,l,a){if($g.apply(this,arguments),Gr){if(Gr){var u=Cs;Gr=!1,Cs=null}else throw Error(S(198));xs||(xs=!0,Pl=u)}}function Nn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ff(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ac(t){if(Nn(t)!==t)throw Error(S(188))}function Vg(t){var e=t.alternate;if(!e){if(e=Nn(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ac(i),t;if(s===r)return ac(i),e;s=s.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function jf(t){return t=Vg(t),t!==null?zf(t):null}function zf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zf(t);if(e!==null)return e;t=t.sibling}return null}var Uf=$e.unstable_scheduleCallback,uc=$e.unstable_cancelCallback,Gg=$e.unstable_shouldYield,Kg=$e.unstable_requestPaint,re=$e.unstable_now,Qg=$e.unstable_getCurrentPriorityLevel,Ba=$e.unstable_ImmediatePriority,Bf=$e.unstable_UserBlockingPriority,ks=$e.unstable_NormalPriority,Yg=$e.unstable_LowPriority,Wf=$e.unstable_IdlePriority,io=null,ht=null;function qg(t){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(io,t,void 0,(t.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:Zg,Xg=Math.log,Jg=Math.LN2;function Zg(t){return t>>>=0,t===0?32:31-(Xg(t)/Jg|0)|0}var Vi=64,Gi=4194304;function Wr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ns(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Wr(l):(s&=o,s!==0&&(r=Wr(s)))}else o=n&~i,o!==0?r=Wr(o):s!==0&&(r=Wr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-st(e),i=1<<n,r|=t[n],e&=~i;return r}function e_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-st(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=e_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Dl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $f(){var t=Vi;return Vi<<=1,!(Vi&4194240)&&(Vi=64),t}function bo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-st(e),t[e]=n}function n_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-st(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Wa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-st(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var B=0;function Hf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vf,$a,Gf,Kf,Qf,Al=!1,Ki=[],jt=null,zt=null,Ut=null,ai=new Map,ui=new Map,Ot=[],r_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cc(t,e){switch(t){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":ai.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ui.delete(e.pointerId)}}function Pr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ai(e),e!==null&&$a(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function i_(t,e,n,r,i){switch(e){case"focusin":return jt=Pr(jt,t,e,n,r,i),!0;case"dragenter":return zt=Pr(zt,t,e,n,r,i),!0;case"mouseover":return Ut=Pr(Ut,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ai.set(s,Pr(ai.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ui.set(s,Pr(ui.get(s)||null,t,e,n,r,i)),!0}return!1}function Yf(t){var e=un(t.target);if(e!==null){var n=Nn(e);if(n!==null){if(e=n.tag,e===13){if(e=Ff(n),e!==null){t.blockedOn=e,Qf(t.priority,function(){Gf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ol(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Il=r,n.target.dispatchEvent(r),Il=null}else return e=Ai(n),e!==null&&$a(e),t.blockedOn=n,!1;e.shift()}return!0}function dc(t,e,n){cs(t)&&n.delete(e)}function s_(){Al=!1,jt!==null&&cs(jt)&&(jt=null),zt!==null&&cs(zt)&&(zt=null),Ut!==null&&cs(Ut)&&(Ut=null),ai.forEach(dc),ui.forEach(dc)}function Dr(t,e){t.blockedOn===e&&(t.blockedOn=null,Al||(Al=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,s_)))}function ci(t){function e(i){return Dr(i,t)}if(0<Ki.length){Dr(Ki[0],t);for(var n=1;n<Ki.length;n++){var r=Ki[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jt!==null&&Dr(jt,t),zt!==null&&Dr(zt,t),Ut!==null&&Dr(Ut,t),ai.forEach(e),ui.forEach(e),n=0;n<Ot.length;n++)r=Ot[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ot.length&&(n=Ot[0],n.blockedOn===null);)Yf(n),n.blockedOn===null&&Ot.shift()}var er=Rt.ReactCurrentBatchConfig,Is=!0;function o_(t,e,n,r){var i=B,s=er.transition;er.transition=null;try{B=1,Ha(t,e,n,r)}finally{B=i,er.transition=s}}function l_(t,e,n,r){var i=B,s=er.transition;er.transition=null;try{B=4,Ha(t,e,n,r)}finally{B=i,er.transition=s}}function Ha(t,e,n,r){if(Is){var i=Ol(t,e,n,r);if(i===null)Go(t,e,r,Ts,n),cc(t,r);else if(i_(i,t,e,n,r))r.stopPropagation();else if(cc(t,r),e&4&&-1<r_.indexOf(t)){for(;i!==null;){var s=Ai(i);if(s!==null&&Vf(s),s=Ol(t,e,n,r),s===null&&Go(t,e,r,Ts,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Go(t,e,r,null,n)}}var Ts=null;function Ol(t,e,n,r){if(Ts=null,t=Ua(r),t=un(t),t!==null)if(e=Nn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ff(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ts=t,null}function qf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qg()){case Ba:return 1;case Bf:return 4;case ks:case Yg:return 16;case Wf:return 536870912;default:return 16}default:return 16}}var bt=null,Va=null,ds=null;function Xf(){if(ds)return ds;var t,e=Va,n=e.length,r,i="value"in bt?bt.value:bt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ds=i.slice(t,1<r?1-r:void 0)}function fs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qi(){return!0}function fc(){return!1}function Ve(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qi:fc,this.isPropagationStopped=fc,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),e}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ga=Ve(wr),Di=ee({},wr,{view:0,detail:0}),a_=Ve(Di),Fo,jo,Ar,so=ee({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ar&&(Ar&&t.type==="mousemove"?(Fo=t.screenX-Ar.screenX,jo=t.screenY-Ar.screenY):jo=Fo=0,Ar=t),Fo)},movementY:function(t){return"movementY"in t?t.movementY:jo}}),hc=Ve(so),u_=ee({},so,{dataTransfer:0}),c_=Ve(u_),d_=ee({},Di,{relatedTarget:0}),zo=Ve(d_),f_=ee({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),h_=Ve(f_),p_=ee({},wr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),m_=Ve(p_),g_=ee({},wr,{data:0}),pc=Ve(g_),__={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=v_[t])?!!e[t]:!1}function Ka(){return w_}var S_=ee({},Di,{key:function(t){if(t.key){var e=__[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?y_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(t){return t.type==="keypress"?fs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),E_=Ve(S_),C_=ee({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=Ve(C_),x_=ee({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),k_=Ve(x_),N_=ee({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),I_=Ve(N_),T_=ee({},so,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R_=Ve(T_),P_=[9,13,27,32],Qa=Ct&&"CompositionEvent"in window,Kr=null;Ct&&"documentMode"in document&&(Kr=document.documentMode);var D_=Ct&&"TextEvent"in window&&!Kr,Jf=Ct&&(!Qa||Kr&&8<Kr&&11>=Kr),gc=" ",_c=!1;function Zf(t,e){switch(t){case"keyup":return P_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fn=!1;function A_(t,e){switch(t){case"compositionend":return eh(e);case"keypress":return e.which!==32?null:(_c=!0,gc);case"textInput":return t=e.data,t===gc&&_c?null:t;default:return null}}function O_(t,e){if(Fn)return t==="compositionend"||!Qa&&Zf(t,e)?(t=Xf(),ds=Va=bt=null,Fn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jf&&e.locale!=="ko"?null:e.data;default:return null}}var M_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M_[t.type]:e==="textarea"}function th(t,e,n,r){Af(r),e=Rs(e,"onChange"),0<e.length&&(n=new Ga("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qr=null,di=null;function L_(t){fh(t,0)}function oo(t){var e=Un(t);if(kf(e))return t}function b_(t,e){if(t==="change")return e}var nh=!1;if(Ct){var Uo;if(Ct){var Bo="oninput"in document;if(!Bo){var vc=document.createElement("div");vc.setAttribute("oninput","return;"),Bo=typeof vc.oninput=="function"}Uo=Bo}else Uo=!1;nh=Uo&&(!document.documentMode||9<document.documentMode)}function wc(){Qr&&(Qr.detachEvent("onpropertychange",rh),di=Qr=null)}function rh(t){if(t.propertyName==="value"&&oo(di)){var e=[];th(e,di,t,Ua(t)),bf(L_,e)}}function F_(t,e,n){t==="focusin"?(wc(),Qr=e,di=n,Qr.attachEvent("onpropertychange",rh)):t==="focusout"&&wc()}function j_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oo(di)}function z_(t,e){if(t==="click")return oo(e)}function U_(t,e){if(t==="input"||t==="change")return oo(e)}function B_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:B_;function fi(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ml.call(e,i)||!at(t[i],e[i]))return!1}return!0}function Sc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ec(t,e){var n=Sc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sc(n)}}function ih(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ih(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sh(){for(var t=window,e=Es();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Es(t.document)}return e}function Ya(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function W_(t){var e=sh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ih(n.ownerDocument.documentElement,n)){if(r!==null&&Ya(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ec(n,s);var o=Ec(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $_=Ct&&"documentMode"in document&&11>=document.documentMode,jn=null,Ml=null,Yr=null,Ll=!1;function Cc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ll||jn==null||jn!==Es(r)||(r=jn,"selectionStart"in r&&Ya(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yr&&fi(Yr,r)||(Yr=r,r=Rs(Ml,"onSelect"),0<r.length&&(e=new Ga("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jn)))}function Yi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zn={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionend:Yi("Transition","TransitionEnd")},Wo={},oh={};Ct&&(oh=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition);function lo(t){if(Wo[t])return Wo[t];if(!zn[t])return t;var e=zn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oh)return Wo[t]=e[n];return t}var lh=lo("animationend"),ah=lo("animationiteration"),uh=lo("animationstart"),ch=lo("transitionend"),dh=new Map,xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(t,e){dh.set(t,e),kn(e,[t])}for(var $o=0;$o<xc.length;$o++){var Ho=xc[$o],H_=Ho.toLowerCase(),V_=Ho[0].toUpperCase()+Ho.slice(1);Jt(H_,"on"+V_)}Jt(lh,"onAnimationEnd");Jt(ah,"onAnimationIteration");Jt(uh,"onAnimationStart");Jt("dblclick","onDoubleClick");Jt("focusin","onFocus");Jt("focusout","onBlur");Jt(ch,"onTransitionEnd");lr("onMouseEnter",["mouseout","mouseover"]);lr("onMouseLeave",["mouseout","mouseover"]);lr("onPointerEnter",["pointerout","pointerover"]);lr("onPointerLeave",["pointerout","pointerover"]);kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G_=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function kc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hg(r,e,void 0,t),t.currentTarget=null}function fh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;kc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;kc(i,l,u),s=a}}}if(xs)throw t=Pl,xs=!1,Pl=null,t}function K(t,e){var n=e[Ul];n===void 0&&(n=e[Ul]=new Set);var r=t+"__bubble";n.has(r)||(hh(e,t,2,!1),n.add(r))}function Vo(t,e,n){var r=0;e&&(r|=4),hh(n,t,r,e)}var qi="_reactListening"+Math.random().toString(36).slice(2);function hi(t){if(!t[qi]){t[qi]=!0,wf.forEach(function(n){n!=="selectionchange"&&(G_.has(n)||Vo(n,!1,t),Vo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qi]||(e[qi]=!0,Vo("selectionchange",!1,e))}}function hh(t,e,n,r){switch(qf(e)){case 1:var i=o_;break;case 4:i=l_;break;default:i=Ha}n=i.bind(null,e,n,t),i=void 0,!Rl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Go(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=un(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}bf(function(){var u=s,f=Ua(n),c=[];e:{var d=dh.get(t);if(d!==void 0){var _=Ga,y=t;switch(t){case"keypress":if(fs(n)===0)break e;case"keydown":case"keyup":_=E_;break;case"focusin":y="focus",_=zo;break;case"focusout":y="blur",_=zo;break;case"beforeblur":case"afterblur":_=zo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=c_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=k_;break;case lh:case ah:case uh:_=h_;break;case ch:_=I_;break;case"scroll":_=a_;break;case"wheel":_=R_;break;case"copy":case"cut":case"paste":_=m_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=mc}var v=(e&4)!==0,k=!v&&t==="scroll",p=v?d!==null?d+"Capture":null:d;v=[];for(var h=u,g;h!==null;){g=h;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=li(h,p),w!=null&&v.push(pi(h,w,g)))),k)break;h=h.return}0<v.length&&(d=new _(d,y,null,n,f),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",d&&n!==Il&&(y=n.relatedTarget||n.fromElement)&&(un(y)||y[xt]))break e;if((_||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=u,y=y?un(y):null,y!==null&&(k=Nn(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=u),_!==y)){if(v=hc,w="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(v=mc,w="onPointerLeave",p="onPointerEnter",h="pointer"),k=_==null?d:Un(_),g=y==null?d:Un(y),d=new v(w,h+"leave",_,n,f),d.target=k,d.relatedTarget=g,w=null,un(f)===u&&(v=new v(p,h+"enter",y,n,f),v.target=g,v.relatedTarget=k,w=v),k=w,_&&y)t:{for(v=_,p=y,h=0,g=v;g;g=An(g))h++;for(g=0,w=p;w;w=An(w))g++;for(;0<h-g;)v=An(v),h--;for(;0<g-h;)p=An(p),g--;for(;h--;){if(v===p||p!==null&&v===p.alternate)break t;v=An(v),p=An(p)}v=null}else v=null;_!==null&&Nc(c,d,_,v,!1),y!==null&&k!==null&&Nc(c,k,y,v,!0)}}e:{if(d=u?Un(u):window,_=d.nodeName&&d.nodeName.toLowerCase(),_==="select"||_==="input"&&d.type==="file")var N=b_;else if(yc(d))if(nh)N=U_;else{N=j_;var E=F_}else(_=d.nodeName)&&_.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=z_);if(N&&(N=N(t,u))){th(c,N,n,f);break e}E&&E(t,d,u),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&El(d,"number",d.value)}switch(E=u?Un(u):window,t){case"focusin":(yc(E)||E.contentEditable==="true")&&(jn=E,Ml=u,Yr=null);break;case"focusout":Yr=Ml=jn=null;break;case"mousedown":Ll=!0;break;case"contextmenu":case"mouseup":case"dragend":Ll=!1,Cc(c,n,f);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Cc(c,n,f)}var x;if(Qa)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Fn?Zf(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Jf&&n.locale!=="ko"&&(Fn||R!=="onCompositionStart"?R==="onCompositionEnd"&&Fn&&(x=Xf()):(bt=f,Va="value"in bt?bt.value:bt.textContent,Fn=!0)),E=Rs(u,R),0<E.length&&(R=new pc(R,t,null,n,f),c.push({event:R,listeners:E}),x?R.data=x:(x=eh(n),x!==null&&(R.data=x)))),(x=D_?A_(t,n):O_(t,n))&&(u=Rs(u,"onBeforeInput"),0<u.length&&(f=new pc("onBeforeInput","beforeinput",null,n,f),c.push({event:f,listeners:u}),f.data=x))}fh(c,e)})}function pi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=li(t,n),s!=null&&r.unshift(pi(t,s,i)),s=li(t,e),s!=null&&r.push(pi(t,s,i))),t=t.return}return r}function An(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=li(n,s),a!=null&&o.unshift(pi(n,a,l))):i||(a=li(n,s),a!=null&&o.push(pi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var K_=/\r\n?/g,Q_=/\u0000|\uFFFD/g;function Ic(t){return(typeof t=="string"?t:""+t).replace(K_,`
`).replace(Q_,"")}function Xi(t,e,n){if(e=Ic(e),Ic(t)!==e&&n)throw Error(S(425))}function Ps(){}var bl=null,Fl=null;function jl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zl=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,Tc=typeof Promise=="function"?Promise:void 0,q_=typeof queueMicrotask=="function"?queueMicrotask:typeof Tc<"u"?function(t){return Tc.resolve(null).then(t).catch(X_)}:zl;function X_(t){setTimeout(function(){throw t})}function Ko(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ci(e)}function Bt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sr=Math.random().toString(36).slice(2),dt="__reactFiber$"+Sr,mi="__reactProps$"+Sr,xt="__reactContainer$"+Sr,Ul="__reactEvents$"+Sr,J_="__reactListeners$"+Sr,Z_="__reactHandles$"+Sr;function un(t){var e=t[dt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xt]||n[dt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rc(t);t!==null;){if(n=t[dt])return n;t=Rc(t)}return e}t=n,n=t.parentNode}return null}function Ai(t){return t=t[dt]||t[xt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Un(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function ao(t){return t[mi]||null}var Bl=[],Bn=-1;function Zt(t){return{current:t}}function Y(t){0>Bn||(t.current=Bl[Bn],Bl[Bn]=null,Bn--)}function G(t,e){Bn++,Bl[Bn]=t.current,t.current=e}var qt={},ke=Zt(qt),Me=Zt(!1),_n=qt;function ar(t,e){var n=t.type.contextTypes;if(!n)return qt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Le(t){return t=t.childContextTypes,t!=null}function Ds(){Y(Me),Y(ke)}function Pc(t,e,n){if(ke.current!==qt)throw Error(S(168));G(ke,e),G(Me,n)}function ph(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,Fg(t)||"Unknown",i));return ee({},n,r)}function As(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qt,_n=ke.current,G(ke,t),G(Me,Me.current),!0}function Dc(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=ph(t,e,_n),r.__reactInternalMemoizedMergedChildContext=t,Y(Me),Y(ke),G(ke,t)):Y(Me),G(Me,n)}var _t=null,uo=!1,Qo=!1;function mh(t){_t===null?_t=[t]:_t.push(t)}function ey(t){uo=!0,mh(t)}function en(){if(!Qo&&_t!==null){Qo=!0;var t=0,e=B;try{var n=_t;for(B=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_t=null,uo=!1}catch(i){throw _t!==null&&(_t=_t.slice(t+1)),Uf(Ba,en),i}finally{B=e,Qo=!1}}return null}var Wn=[],$n=0,Os=null,Ms=0,Ge=[],Ke=0,yn=null,yt=1,vt="";function rn(t,e){Wn[$n++]=Ms,Wn[$n++]=Os,Os=t,Ms=e}function gh(t,e,n){Ge[Ke++]=yt,Ge[Ke++]=vt,Ge[Ke++]=yn,yn=t;var r=yt;t=vt;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yt=1<<32-st(e)+i|n<<i|r,vt=s+t}else yt=1<<s|n<<i|r,vt=t}function qa(t){t.return!==null&&(rn(t,1),gh(t,1,0))}function Xa(t){for(;t===Os;)Os=Wn[--$n],Wn[$n]=null,Ms=Wn[--$n],Wn[$n]=null;for(;t===yn;)yn=Ge[--Ke],Ge[Ke]=null,vt=Ge[--Ke],Ge[Ke]=null,yt=Ge[--Ke],Ge[Ke]=null}var Be=null,Ue=null,q=!1,rt=null;function _h(t,e){var n=Qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ac(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,Ue=Bt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,Ue=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yn!==null?{id:yt,overflow:vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,Ue=null,!0):!1;default:return!1}}function Wl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $l(t){if(q){var e=Ue;if(e){var n=e;if(!Ac(t,e)){if(Wl(t))throw Error(S(418));e=Bt(n.nextSibling);var r=Be;e&&Ac(t,e)?_h(r,n):(t.flags=t.flags&-4097|2,q=!1,Be=t)}}else{if(Wl(t))throw Error(S(418));t.flags=t.flags&-4097|2,q=!1,Be=t}}}function Oc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function Ji(t){if(t!==Be)return!1;if(!q)return Oc(t),q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jl(t.type,t.memoizedProps)),e&&(e=Ue)){if(Wl(t))throw yh(),Error(S(418));for(;e;)_h(t,e),e=Bt(e.nextSibling)}if(Oc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ue=Bt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ue=null}}else Ue=Be?Bt(t.stateNode.nextSibling):null;return!0}function yh(){for(var t=Ue;t;)t=Bt(t.nextSibling)}function ur(){Ue=Be=null,q=!1}function Ja(t){rt===null?rt=[t]:rt.push(t)}var ty=Rt.ReactCurrentBatchConfig;function Or(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function Zi(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mc(t){var e=t._init;return e(t._payload)}function vh(t){function e(p,h){if(t){var g=p.deletions;g===null?(p.deletions=[h],p.flags|=16):g.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=Vt(p,h),p.index=0,p.sibling=null,p}function s(p,h,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<h?(p.flags|=2,h):g):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,g,w){return h===null||h.tag!==6?(h=tl(g,p.mode,w),h.return=p,h):(h=i(h,g),h.return=p,h)}function a(p,h,g,w){var N=g.type;return N===bn?f(p,h,g.props.children,w,g.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Dt&&Mc(N)===h.type)?(w=i(h,g.props),w.ref=Or(p,h,g),w.return=p,w):(w=vs(g.type,g.key,g.props,null,p.mode,w),w.ref=Or(p,h,g),w.return=p,w)}function u(p,h,g,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=nl(g,p.mode,w),h.return=p,h):(h=i(h,g.children||[]),h.return=p,h)}function f(p,h,g,w,N){return h===null||h.tag!==7?(h=mn(g,p.mode,w,N),h.return=p,h):(h=i(h,g),h.return=p,h)}function c(p,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=tl(""+h,p.mode,g),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Wi:return g=vs(h.type,h.key,h.props,null,p.mode,g),g.ref=Or(p,null,h),g.return=p,g;case Ln:return h=nl(h,p.mode,g),h.return=p,h;case Dt:var w=h._init;return c(p,w(h._payload),g)}if(Br(h)||Tr(h))return h=mn(h,p.mode,g,null),h.return=p,h;Zi(p,h)}return null}function d(p,h,g,w){var N=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:l(p,h,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Wi:return g.key===N?a(p,h,g,w):null;case Ln:return g.key===N?u(p,h,g,w):null;case Dt:return N=g._init,d(p,h,N(g._payload),w)}if(Br(g)||Tr(g))return N!==null?null:f(p,h,g,w,null);Zi(p,g)}return null}function _(p,h,g,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,l(h,p,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wi:return p=p.get(w.key===null?g:w.key)||null,a(h,p,w,N);case Ln:return p=p.get(w.key===null?g:w.key)||null,u(h,p,w,N);case Dt:var E=w._init;return _(p,h,g,E(w._payload),N)}if(Br(w)||Tr(w))return p=p.get(g)||null,f(h,p,w,N,null);Zi(h,w)}return null}function y(p,h,g,w){for(var N=null,E=null,x=h,R=h=0,X=null;x!==null&&R<g.length;R++){x.index>R?(X=x,x=null):X=x.sibling;var O=d(p,x,g[R],w);if(O===null){x===null&&(x=X);break}t&&x&&O.alternate===null&&e(p,x),h=s(O,h,R),E===null?N=O:E.sibling=O,E=O,x=X}if(R===g.length)return n(p,x),q&&rn(p,R),N;if(x===null){for(;R<g.length;R++)x=c(p,g[R],w),x!==null&&(h=s(x,h,R),E===null?N=x:E.sibling=x,E=x);return q&&rn(p,R),N}for(x=r(p,x);R<g.length;R++)X=_(x,p,R,g[R],w),X!==null&&(t&&X.alternate!==null&&x.delete(X.key===null?R:X.key),h=s(X,h,R),E===null?N=X:E.sibling=X,E=X);return t&&x.forEach(function(we){return e(p,we)}),q&&rn(p,R),N}function v(p,h,g,w){var N=Tr(g);if(typeof N!="function")throw Error(S(150));if(g=N.call(g),g==null)throw Error(S(151));for(var E=N=null,x=h,R=h=0,X=null,O=g.next();x!==null&&!O.done;R++,O=g.next()){x.index>R?(X=x,x=null):X=x.sibling;var we=d(p,x,O.value,w);if(we===null){x===null&&(x=X);break}t&&x&&we.alternate===null&&e(p,x),h=s(we,h,R),E===null?N=we:E.sibling=we,E=we,x=X}if(O.done)return n(p,x),q&&rn(p,R),N;if(x===null){for(;!O.done;R++,O=g.next())O=c(p,O.value,w),O!==null&&(h=s(O,h,R),E===null?N=O:E.sibling=O,E=O);return q&&rn(p,R),N}for(x=r(p,x);!O.done;R++,O=g.next())O=_(x,p,R,O.value,w),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?R:O.key),h=s(O,h,R),E===null?N=O:E.sibling=O,E=O);return t&&x.forEach(function(Nr){return e(p,Nr)}),q&&rn(p,R),N}function k(p,h,g,w){if(typeof g=="object"&&g!==null&&g.type===bn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Wi:e:{for(var N=g.key,E=h;E!==null;){if(E.key===N){if(N=g.type,N===bn){if(E.tag===7){n(p,E.sibling),h=i(E,g.props.children),h.return=p,p=h;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Dt&&Mc(N)===E.type){n(p,E.sibling),h=i(E,g.props),h.ref=Or(p,E,g),h.return=p,p=h;break e}n(p,E);break}else e(p,E);E=E.sibling}g.type===bn?(h=mn(g.props.children,p.mode,w,g.key),h.return=p,p=h):(w=vs(g.type,g.key,g.props,null,p.mode,w),w.ref=Or(p,h,g),w.return=p,p=w)}return o(p);case Ln:e:{for(E=g.key;h!==null;){if(h.key===E)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){n(p,h.sibling),h=i(h,g.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=nl(g,p.mode,w),h.return=p,p=h}return o(p);case Dt:return E=g._init,k(p,h,E(g._payload),w)}if(Br(g))return y(p,h,g,w);if(Tr(g))return v(p,h,g,w);Zi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,g),h.return=p,p=h):(n(p,h),h=tl(g,p.mode,w),h.return=p,p=h),o(p)):n(p,h)}return k}var cr=vh(!0),wh=vh(!1),Ls=Zt(null),bs=null,Hn=null,Za=null;function eu(){Za=Hn=bs=null}function tu(t){var e=Ls.current;Y(Ls),t._currentValue=e}function Hl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tr(t,e){bs=t,Za=Hn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function Je(t){var e=t._currentValue;if(Za!==t)if(t={context:t,memoizedValue:e,next:null},Hn===null){if(bs===null)throw Error(S(308));Hn=t,bs.dependencies={lanes:0,firstContext:t}}else Hn=Hn.next=t;return e}var cn=null;function nu(t){cn===null?cn=[t]:cn.push(t)}function Sh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,nu(e)):(n.next=i.next,i.next=n),e.interleaved=n,kt(t,r)}function kt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var At=!1;function ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function St(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,z&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kt(t,n)}return i=r.interleaved,i===null?(e.next=e,nu(r)):(e.next=i.next,i.next=e),r.interleaved=e,kt(t,n)}function hs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wa(t,n)}}function Lc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fs(t,e,n,r){var i=t.updateQueue;At=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,f=u=a=null,l=s;do{var d=l.lane,_=l.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,v=l;switch(d=e,_=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){c=y.call(_,c,d);break e}c=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,d=typeof y=="function"?y.call(_,c,d):y,d==null)break e;c=ee({},c,d);break e;case 2:At=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else _={eventTime:_,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=_,a=c):f=f.next=_,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(f===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wn|=o,t.lanes=o,t.memoizedState=c}}function bc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var Oi={},pt=Zt(Oi),gi=Zt(Oi),_i=Zt(Oi);function dn(t){if(t===Oi)throw Error(S(174));return t}function iu(t,e){switch(G(_i,e),G(gi,t),G(pt,Oi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xl(e,t)}Y(pt),G(pt,e)}function dr(){Y(pt),Y(gi),Y(_i)}function Ch(t){dn(_i.current);var e=dn(pt.current),n=xl(e,t.type);e!==n&&(G(gi,t),G(pt,n))}function su(t){gi.current===t&&(Y(pt),Y(gi))}var J=Zt(0);function js(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yo=[];function ou(){for(var t=0;t<Yo.length;t++)Yo[t]._workInProgressVersionPrimary=null;Yo.length=0}var ps=Rt.ReactCurrentDispatcher,qo=Rt.ReactCurrentBatchConfig,vn=0,Z=null,oe=null,de=null,zs=!1,qr=!1,yi=0,ny=0;function Se(){throw Error(S(321))}function lu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!at(t[n],e[n]))return!1;return!0}function au(t,e,n,r,i,s){if(vn=s,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ps.current=t===null||t.memoizedState===null?oy:ly,t=n(r,i),qr){s=0;do{if(qr=!1,yi=0,25<=s)throw Error(S(301));s+=1,de=oe=null,e.updateQueue=null,ps.current=ay,t=n(r,i)}while(qr)}if(ps.current=Us,e=oe!==null&&oe.next!==null,vn=0,de=oe=Z=null,zs=!1,e)throw Error(S(300));return t}function uu(){var t=yi!==0;return yi=0,t}function ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?Z.memoizedState=de=t:de=de.next=t,de}function Ze(){if(oe===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=oe.next;var e=de===null?Z.memoizedState:de.next;if(e!==null)de=e,oe=t;else{if(t===null)throw Error(S(310));oe=t,t={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},de===null?Z.memoizedState=de=t:de=de.next=t}return de}function vi(t,e){return typeof e=="function"?e(t):e}function Xo(t){var e=Ze(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=oe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((vn&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,Z.lanes|=f,wn|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,at(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Z.lanes|=s,wn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jo(t){var e=Ze(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);at(s,e.memoizedState)||(Ae=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xh(){}function kh(t,e){var n=Z,r=Ze(),i=e(),s=!at(r.memoizedState,i);if(s&&(r.memoizedState=i,Ae=!0),r=r.queue,cu(Th.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,wi(9,Ih.bind(null,n,r,i,e),void 0,null),he===null)throw Error(S(349));vn&30||Nh(n,e,i)}return i}function Nh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ih(t,e,n,r){e.value=n,e.getSnapshot=r,Rh(e)&&Ph(t)}function Th(t,e,n){return n(function(){Rh(e)&&Ph(t)})}function Rh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!at(t,n)}catch{return!0}}function Ph(t){var e=kt(t,1);e!==null&&ot(e,t,1,-1)}function Fc(t){var e=ct();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},e.queue=t,t=t.dispatch=sy.bind(null,Z,t),[e.memoizedState,t]}function wi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dh(){return Ze().memoizedState}function ms(t,e,n,r){var i=ct();Z.flags|=t,i.memoizedState=wi(1|e,n,void 0,r===void 0?null:r)}function co(t,e,n,r){var i=Ze();r=r===void 0?null:r;var s=void 0;if(oe!==null){var o=oe.memoizedState;if(s=o.destroy,r!==null&&lu(r,o.deps)){i.memoizedState=wi(e,n,s,r);return}}Z.flags|=t,i.memoizedState=wi(1|e,n,s,r)}function jc(t,e){return ms(8390656,8,t,e)}function cu(t,e){return co(2048,8,t,e)}function Ah(t,e){return co(4,2,t,e)}function Oh(t,e){return co(4,4,t,e)}function Mh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lh(t,e,n){return n=n!=null?n.concat([t]):null,co(4,4,Mh.bind(null,e,t),n)}function du(){}function bh(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fh(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jh(t,e,n){return vn&21?(at(n,e)||(n=$f(),Z.lanes|=n,wn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=n)}function ry(t,e){var n=B;B=n!==0&&4>n?n:4,t(!0);var r=qo.transition;qo.transition={};try{t(!1),e()}finally{B=n,qo.transition=r}}function zh(){return Ze().memoizedState}function iy(t,e,n){var r=Ht(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uh(t))Bh(e,n);else if(n=Sh(t,e,n,r),n!==null){var i=Ie();ot(n,t,r,i),Wh(n,e,r)}}function sy(t,e,n){var r=Ht(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uh(t))Bh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,at(l,o)){var a=e.interleaved;a===null?(i.next=i,nu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Sh(t,e,i,r),n!==null&&(i=Ie(),ot(n,t,r,i),Wh(n,e,r))}}function Uh(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function Bh(t,e){qr=zs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wa(t,n)}}var Us={readContext:Je,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},oy={readContext:Je,useCallback:function(t,e){return ct().memoizedState=[t,e===void 0?null:e],t},useContext:Je,useEffect:jc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ms(4194308,4,Mh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ms(4194308,4,t,e)},useInsertionEffect:function(t,e){return ms(4,2,t,e)},useMemo:function(t,e){var n=ct();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ct();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iy.bind(null,Z,t),[r.memoizedState,t]},useRef:function(t){var e=ct();return t={current:t},e.memoizedState=t},useState:Fc,useDebugValue:du,useDeferredValue:function(t){return ct().memoizedState=t},useTransition:function(){var t=Fc(!1),e=t[0];return t=ry.bind(null,t[1]),ct().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Z,i=ct();if(q){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),he===null)throw Error(S(349));vn&30||Nh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jc(Th.bind(null,r,s,t),[t]),r.flags|=2048,wi(9,Ih.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ct(),e=he.identifierPrefix;if(q){var n=vt,r=yt;n=(r&~(1<<32-st(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ny++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ly={readContext:Je,useCallback:bh,useContext:Je,useEffect:cu,useImperativeHandle:Lh,useInsertionEffect:Ah,useLayoutEffect:Oh,useMemo:Fh,useReducer:Xo,useRef:Dh,useState:function(){return Xo(vi)},useDebugValue:du,useDeferredValue:function(t){var e=Ze();return jh(e,oe.memoizedState,t)},useTransition:function(){var t=Xo(vi)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:xh,useSyncExternalStore:kh,useId:zh,unstable_isNewReconciler:!1},ay={readContext:Je,useCallback:bh,useContext:Je,useEffect:cu,useImperativeHandle:Lh,useInsertionEffect:Ah,useLayoutEffect:Oh,useMemo:Fh,useReducer:Jo,useRef:Dh,useState:function(){return Jo(vi)},useDebugValue:du,useDeferredValue:function(t){var e=Ze();return oe===null?e.memoizedState=t:jh(e,oe.memoizedState,t)},useTransition:function(){var t=Jo(vi)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:xh,useSyncExternalStore:kh,useId:zh,unstable_isNewReconciler:!1};function tt(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fo={isMounted:function(t){return(t=t._reactInternals)?Nn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=Ht(t),s=St(r,i);s.payload=e,n!=null&&(s.callback=n),e=Wt(t,s,i),e!==null&&(ot(e,t,i,r),hs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=Ht(t),s=St(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wt(t,s,i),e!==null&&(ot(e,t,i,r),hs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=Ht(t),i=St(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wt(t,i,r),e!==null&&(ot(e,t,r,n),hs(e,t,r))}};function zc(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fi(n,r)||!fi(i,s):!0}function $h(t,e,n){var r=!1,i=qt,s=e.contextType;return typeof s=="object"&&s!==null?s=Je(s):(i=Le(e)?_n:ke.current,r=e.contextTypes,s=(r=r!=null)?ar(t,i):qt),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Uc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function Gl(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ru(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Je(s):(s=Le(e)?_n:ke.current,i.context=ar(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vl(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fo.enqueueReplaceState(i,i.state,null),Fs(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fr(t,e){try{var n="",r=e;do n+=bg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uy=typeof WeakMap=="function"?WeakMap:Map;function Hh(t,e,n){n=St(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ws||(Ws=!0,ra=r),Kl(t,e)},n}function Vh(t,e,n){n=St(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kl(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Kl(t,e),typeof r!="function"&&($t===null?$t=new Set([this]):$t.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uy;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cy.bind(null,t,e,n),e.then(t,t))}function Wc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $c(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=St(-1,1),e.tag=2,Wt(n,e,1))),n.lanes|=1),t)}var cy=Rt.ReactCurrentOwner,Ae=!1;function Ne(t,e,n,r){e.child=t===null?wh(e,null,n,r):cr(e,t.child,n,r)}function Hc(t,e,n,r,i){n=n.render;var s=e.ref;return tr(e,i),r=au(t,e,n,r,s,i),n=uu(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nt(t,e,i)):(q&&n&&qa(e),e.flags|=1,Ne(t,e,r,i),e.child)}function Vc(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Gh(t,e,s,r,i)):(t=vs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fi,n(o,r)&&t.ref===e.ref)return Nt(t,e,i)}return e.flags|=1,t=Vt(s,r),t.ref=e.ref,t.return=e,e.child=t}function Gh(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fi(s,r)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Nt(t,e,i)}return Ql(t,e,n,r,i)}function Kh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(Gn,je),je|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(Gn,je),je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,G(Gn,je),je|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,G(Gn,je),je|=r;return Ne(t,e,i,n),e.child}function Qh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ql(t,e,n,r,i){var s=Le(n)?_n:ke.current;return s=ar(e,s),tr(e,i),n=au(t,e,n,r,s,i),r=uu(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nt(t,e,i)):(q&&r&&qa(e),e.flags|=1,Ne(t,e,n,i),e.child)}function Gc(t,e,n,r,i){if(Le(n)){var s=!0;As(e)}else s=!1;if(tr(e,i),e.stateNode===null)gs(t,e),$h(e,n,r),Gl(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Je(u):(u=Le(n)?_n:ke.current,u=ar(e,u));var f=n.getDerivedStateFromProps,c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Uc(e,o,r,u),At=!1;var d=e.memoizedState;o.state=d,Fs(e,r,o,i),a=e.memoizedState,l!==r||d!==a||Me.current||At?(typeof f=="function"&&(Vl(e,n,f,r),a=e.memoizedState),(l=At||zc(e,n,l,r,d,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Eh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:tt(e.type,l),o.props=u,c=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Je(a):(a=Le(n)?_n:ke.current,a=ar(e,a));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||d!==a)&&Uc(e,o,r,a),At=!1,d=e.memoizedState,o.state=d,Fs(e,r,o,i);var y=e.memoizedState;l!==c||d!==y||Me.current||At?(typeof _=="function"&&(Vl(e,n,_,r),y=e.memoizedState),(u=At||zc(e,n,u,r,d,y,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Yl(t,e,n,r,s,i)}function Yl(t,e,n,r,i,s){Qh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Dc(e,n,!1),Nt(t,e,s);r=e.stateNode,cy.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cr(e,t.child,null,s),e.child=cr(e,null,l,s)):Ne(t,e,l,s),e.memoizedState=r.state,i&&Dc(e,n,!0),e.child}function Yh(t){var e=t.stateNode;e.pendingContext?Pc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pc(t,e.context,!1),iu(t,e.containerInfo)}function Kc(t,e,n,r,i){return ur(),Ja(i),e.flags|=256,Ne(t,e,n,r),e.child}var ql={dehydrated:null,treeContext:null,retryLane:0};function Xl(t){return{baseLanes:t,cachePool:null,transitions:null}}function qh(t,e,n){var r=e.pendingProps,i=J.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),G(J,i&1),t===null)return $l(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mo(o,r,0,null),t=mn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xl(n),e.memoizedState=ql,t):fu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return dy(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Vt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Vt(l,s):(s=mn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ql,r}return s=t.child,t=s.sibling,r=Vt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fu(t,e){return e=mo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function es(t,e,n,r){return r!==null&&Ja(r),cr(e,t.child,null,n),t=fu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dy(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zo(Error(S(422))),es(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mo({mode:"visible",children:r.children},i,0,null),s=mn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cr(e,t.child,null,o),e.child.memoizedState=Xl(o),e.memoizedState=ql,s);if(!(e.mode&1))return es(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(S(419)),r=Zo(s,r,void 0),es(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ae||l){if(r=he,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kt(t,i),ot(r,t,i,-1))}return yu(),r=Zo(Error(S(421))),es(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=xy.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ue=Bt(i.nextSibling),Be=e,q=!0,rt=null,t!==null&&(Ge[Ke++]=yt,Ge[Ke++]=vt,Ge[Ke++]=yn,yt=t.id,vt=t.overflow,yn=e),e=fu(e,r.children),e.flags|=4096,e)}function Qc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hl(t.return,e,n)}function el(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xh(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ne(t,e,r.children,n),r=J.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qc(t,n,e);else if(t.tag===19)Qc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(J,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&js(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),el(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&js(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}el(e,!0,n,null,s);break;case"together":el(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=Vt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fy(t,e,n){switch(e.tag){case 3:Yh(e),ur();break;case 5:Ch(e);break;case 1:Le(e.type)&&As(e);break;case 4:iu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;G(Ls,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(J,J.current&1),e.flags|=128,null):n&e.child.childLanes?qh(t,e,n):(G(J,J.current&1),t=Nt(t,e,n),t!==null?t.sibling:null);G(J,J.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(J,J.current),r)break;return null;case 22:case 23:return e.lanes=0,Kh(t,e,n)}return Nt(t,e,n)}var Jh,Jl,Zh,ep;Jh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jl=function(){};Zh=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,dn(pt.current);var s=null;switch(n){case"input":i=wl(t,i),r=wl(t,r),s=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),s=[];break;case"textarea":i=Cl(t,i),r=Cl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ps)}kl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(si.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(si.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&K("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ep=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mr(t,e){if(!q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ee(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hy(t,e,n){var r=e.pendingProps;switch(Xa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(e),null;case 1:return Le(e.type)&&Ds(),Ee(e),null;case 3:return r=e.stateNode,dr(),Y(Me),Y(ke),ou(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ji(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rt!==null&&(oa(rt),rt=null))),Jl(t,e),Ee(e),null;case 5:su(e);var i=dn(_i.current);if(n=e.type,t!==null&&e.stateNode!=null)Zh(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return Ee(e),null}if(t=dn(pt.current),Ji(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[dt]=e,r[mi]=s,t=(e.mode&1)!==0,n){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(i=0;i<$r.length;i++)K($r[i],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":rc(r,s),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},K("invalid",r);break;case"textarea":sc(r,s),K("invalid",r)}kl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Xi(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Xi(r.textContent,l,t),i=["children",""+l]):si.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&K("scroll",r)}switch(n){case"input":$i(r),ic(r,s,!0);break;case"textarea":$i(r),oc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ps)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dt]=e,t[mi]=r,Jh(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nl(n,r),n){case"dialog":K("cancel",t),K("close",t),i=r;break;case"iframe":case"object":case"embed":K("load",t),i=r;break;case"video":case"audio":for(i=0;i<$r.length;i++)K($r[i],t);i=r;break;case"source":K("error",t),i=r;break;case"img":case"image":case"link":K("error",t),K("load",t),i=r;break;case"details":K("toggle",t),i=r;break;case"input":rc(t,r),i=wl(t,r),K("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),K("invalid",t);break;case"textarea":sc(t,r),i=Cl(t,r),K("invalid",t);break;default:i=r}kl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Df(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Rf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&oi(t,a):typeof a=="number"&&oi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(si.hasOwnProperty(s)?a!=null&&s==="onScroll"&&K("scroll",t):a!=null&&ba(t,s,a,o))}switch(n){case"input":$i(t),ic(t,r,!1);break;case"textarea":$i(t),oc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xn(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ps)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ee(e),null;case 6:if(t&&e.stateNode!=null)ep(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=dn(_i.current),dn(pt.current),Ji(e)){if(r=e.stateNode,n=e.memoizedProps,r[dt]=e,(s=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:Xi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xi(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dt]=e,e.stateNode=r}return Ee(e),null;case 13:if(Y(J),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(q&&Ue!==null&&e.mode&1&&!(e.flags&128))yh(),ur(),e.flags|=98560,s=!1;else if(s=Ji(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(S(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(S(317));s[dt]=e}else ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ee(e),s=!1}else rt!==null&&(oa(rt),rt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?ae===0&&(ae=3):yu())),e.updateQueue!==null&&(e.flags|=4),Ee(e),null);case 4:return dr(),Jl(t,e),t===null&&hi(e.stateNode.containerInfo),Ee(e),null;case 10:return tu(e.type._context),Ee(e),null;case 17:return Le(e.type)&&Ds(),Ee(e),null;case 19:if(Y(J),s=e.memoizedState,s===null)return Ee(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mr(s,!1);else{if(ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=js(t),o!==null){for(e.flags|=128,Mr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(J,J.current&1|2),e.child}t=t.sibling}s.tail!==null&&re()>hr&&(e.flags|=128,r=!0,Mr(s,!1),e.lanes=4194304)}else{if(!r)if(t=js(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!q)return Ee(e),null}else 2*re()-s.renderingStartTime>hr&&n!==1073741824&&(e.flags|=128,r=!0,Mr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=re(),e.sibling=null,n=J.current,G(J,r?n&1|2:n&1),e):(Ee(e),null);case 22:case 23:return _u(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?je&1073741824&&(Ee(e),e.subtreeFlags&6&&(e.flags|=8192)):Ee(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function py(t,e){switch(Xa(e),e.tag){case 1:return Le(e.type)&&Ds(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dr(),Y(Me),Y(ke),ou(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return su(e),null;case 13:if(Y(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(J),null;case 4:return dr(),null;case 10:return tu(e.type._context),null;case 22:case 23:return _u(),null;case 24:return null;default:return null}}var ts=!1,xe=!1,my=typeof WeakSet=="function"?WeakSet:Set,I=null;function Vn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function Zl(t,e,n){try{n()}catch(r){te(t,e,r)}}var Yc=!1;function gy(t,e){if(bl=Is,t=sh(),Ya(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,c=t,d=null;t:for(;;){for(var _;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(_=c.firstChild)!==null;)d=c,c=_;for(;;){if(c===t)break t;if(d===n&&++u===i&&(l=o),d===s&&++f===r&&(a=o),(_=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=_}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fl={focusedElem:t,selectionRange:n},Is=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,k=y.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:tt(e.type,v),k);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(w){te(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return y=Yc,Yc=!1,y}function Xr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zl(e,n,s)}i=i.next}while(i!==r)}}function ho(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ea(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tp(t){var e=t.alternate;e!==null&&(t.alternate=null,tp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dt],delete e[mi],delete e[Ul],delete e[J_],delete e[Z_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function np(t){return t.tag===5||t.tag===3||t.tag===4}function qc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ta(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ps));else if(r!==4&&(t=t.child,t!==null))for(ta(t,e,n),t=t.sibling;t!==null;)ta(t,e,n),t=t.sibling}function na(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(na(t,e,n),t=t.sibling;t!==null;)na(t,e,n),t=t.sibling}var pe=null,nt=!1;function Pt(t,e,n){for(n=n.child;n!==null;)rp(t,e,n),n=n.sibling}function rp(t,e,n){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(io,n)}catch{}switch(n.tag){case 5:xe||Vn(n,e);case 6:var r=pe,i=nt;pe=null,Pt(t,e,n),pe=r,nt=i,pe!==null&&(nt?(t=pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(nt?(t=pe,n=n.stateNode,t.nodeType===8?Ko(t.parentNode,n):t.nodeType===1&&Ko(t,n),ci(t)):Ko(pe,n.stateNode));break;case 4:r=pe,i=nt,pe=n.stateNode.containerInfo,nt=!0,Pt(t,e,n),pe=r,nt=i;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zl(n,e,o),i=i.next}while(i!==r)}Pt(t,e,n);break;case 1:if(!xe&&(Vn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){te(n,e,l)}Pt(t,e,n);break;case 21:Pt(t,e,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,Pt(t,e,n),xe=r):Pt(t,e,n);break;default:Pt(t,e,n)}}function Xc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new my),e.forEach(function(r){var i=ky.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:pe=l.stateNode,nt=!1;break e;case 3:pe=l.stateNode.containerInfo,nt=!0;break e;case 4:pe=l.stateNode.containerInfo,nt=!0;break e}l=l.return}if(pe===null)throw Error(S(160));rp(s,o,i),pe=null,nt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){te(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ip(e,t),e=e.sibling}function ip(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(et(e,t),ut(t),r&4){try{Xr(3,t,t.return),ho(3,t)}catch(v){te(t,t.return,v)}try{Xr(5,t,t.return)}catch(v){te(t,t.return,v)}}break;case 1:et(e,t),ut(t),r&512&&n!==null&&Vn(n,n.return);break;case 5:if(et(e,t),ut(t),r&512&&n!==null&&Vn(n,n.return),t.flags&32){var i=t.stateNode;try{oi(i,"")}catch(v){te(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Nf(i,s),Nl(l,o);var u=Nl(l,s);for(o=0;o<a.length;o+=2){var f=a[o],c=a[o+1];f==="style"?Df(i,c):f==="dangerouslySetInnerHTML"?Rf(i,c):f==="children"?oi(i,c):ba(i,f,c,u)}switch(l){case"input":Sl(i,s);break;case"textarea":If(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Xn(i,!!s.multiple,_,!1):d!==!!s.multiple&&(s.defaultValue!=null?Xn(i,!!s.multiple,s.defaultValue,!0):Xn(i,!!s.multiple,s.multiple?[]:"",!1))}i[mi]=s}catch(v){te(t,t.return,v)}}break;case 6:if(et(e,t),ut(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){te(t,t.return,v)}}break;case 3:if(et(e,t),ut(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ci(e.containerInfo)}catch(v){te(t,t.return,v)}break;case 4:et(e,t),ut(t);break;case 13:et(e,t),ut(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mu=re())),r&4&&Xc(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(xe=(u=xe)||f,et(e,t),xe=u):et(e,t),ut(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(I=t,f=t.child;f!==null;){for(c=I=f;I!==null;){switch(d=I,_=d.child,d.tag){case 0:case 11:case 14:case 15:Xr(4,d,d.return);break;case 1:Vn(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){te(r,n,v)}}break;case 5:Vn(d,d.return);break;case 22:if(d.memoizedState!==null){Zc(c);continue}}_!==null?(_.return=d,I=_):Zc(c)}f=f.sibling}e:for(f=null,c=t;;){if(c.tag===5){if(f===null){f=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Pf("display",o))}catch(v){te(t,t.return,v)}}}else if(c.tag===6){if(f===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){te(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:et(e,t),ut(t),r&4&&Xc(t);break;case 21:break;default:et(e,t),ut(t)}}function ut(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(np(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oi(i,""),r.flags&=-33);var s=qc(t);na(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=qc(t);ta(t,l,o);break;default:throw Error(S(161))}}catch(a){te(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _y(t,e,n){I=t,sp(t)}function sp(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ts;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||xe;l=ts;var u=xe;if(ts=o,(xe=a)&&!u)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?ed(i):a!==null?(a.return=o,I=a):ed(i);for(;s!==null;)I=s,sp(s),s=s.sibling;I=i,ts=l,xe=u}Jc(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):Jc(t)}}function Jc(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xe||ho(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bc(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bc(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var c=f.dehydrated;c!==null&&ci(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}xe||e.flags&512&&ea(e)}catch(d){te(e,e.return,d)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function Zc(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function ed(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ho(4,e)}catch(a){te(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){te(e,i,a)}}var s=e.return;try{ea(e)}catch(a){te(e,s,a)}break;case 5:var o=e.return;try{ea(e)}catch(a){te(e,o,a)}}}catch(a){te(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var yy=Math.ceil,Bs=Rt.ReactCurrentDispatcher,hu=Rt.ReactCurrentOwner,Xe=Rt.ReactCurrentBatchConfig,z=0,he=null,se=null,ye=0,je=0,Gn=Zt(0),ae=0,Si=null,wn=0,po=0,pu=0,Jr=null,De=null,mu=0,hr=1/0,gt=null,Ws=!1,ra=null,$t=null,ns=!1,Ft=null,$s=0,Zr=0,ia=null,_s=-1,ys=0;function Ie(){return z&6?re():_s!==-1?_s:_s=re()}function Ht(t){return t.mode&1?z&2&&ye!==0?ye&-ye:ty.transition!==null?(ys===0&&(ys=$f()),ys):(t=B,t!==0||(t=window.event,t=t===void 0?16:qf(t.type)),t):1}function ot(t,e,n,r){if(50<Zr)throw Zr=0,ia=null,Error(S(185));Pi(t,n,r),(!(z&2)||t!==he)&&(t===he&&(!(z&2)&&(po|=n),ae===4&&Mt(t,ye)),be(t,r),n===1&&z===0&&!(e.mode&1)&&(hr=re()+500,uo&&en()))}function be(t,e){var n=t.callbackNode;t_(t,e);var r=Ns(t,t===he?ye:0);if(r===0)n!==null&&uc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uc(n),e===1)t.tag===0?ey(td.bind(null,t)):mh(td.bind(null,t)),q_(function(){!(z&6)&&en()}),n=null;else{switch(Hf(r)){case 1:n=Ba;break;case 4:n=Bf;break;case 16:n=ks;break;case 536870912:n=Wf;break;default:n=ks}n=hp(n,op.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function op(t,e){if(_s=-1,ys=0,z&6)throw Error(S(327));var n=t.callbackNode;if(nr()&&t.callbackNode!==n)return null;var r=Ns(t,t===he?ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hs(t,r);else{e=r;var i=z;z|=2;var s=ap();(he!==t||ye!==e)&&(gt=null,hr=re()+500,pn(t,e));do try{Sy();break}catch(l){lp(t,l)}while(!0);eu(),Bs.current=s,z=i,se!==null?e=0:(he=null,ye=0,e=ae)}if(e!==0){if(e===2&&(i=Dl(t),i!==0&&(r=i,e=sa(t,i))),e===1)throw n=Si,pn(t,0),Mt(t,r),be(t,re()),n;if(e===6)Mt(t,r);else{if(i=t.current.alternate,!(r&30)&&!vy(i)&&(e=Hs(t,r),e===2&&(s=Dl(t),s!==0&&(r=s,e=sa(t,s))),e===1))throw n=Si,pn(t,0),Mt(t,r),be(t,re()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:sn(t,De,gt);break;case 3:if(Mt(t,r),(r&130023424)===r&&(e=mu+500-re(),10<e)){if(Ns(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zl(sn.bind(null,t,De,gt),e);break}sn(t,De,gt);break;case 4:if(Mt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yy(r/1960))-r,10<r){t.timeoutHandle=zl(sn.bind(null,t,De,gt),r);break}sn(t,De,gt);break;case 5:sn(t,De,gt);break;default:throw Error(S(329))}}}return be(t,re()),t.callbackNode===n?op.bind(null,t):null}function sa(t,e){var n=Jr;return t.current.memoizedState.isDehydrated&&(pn(t,e).flags|=256),t=Hs(t,e),t!==2&&(e=De,De=n,e!==null&&oa(e)),t}function oa(t){De===null?De=t:De.push.apply(De,t)}function vy(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!at(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mt(t,e){for(e&=~pu,e&=~po,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-st(e),r=1<<n;t[n]=-1,e&=~r}}function td(t){if(z&6)throw Error(S(327));nr();var e=Ns(t,0);if(!(e&1))return be(t,re()),null;var n=Hs(t,e);if(t.tag!==0&&n===2){var r=Dl(t);r!==0&&(e=r,n=sa(t,r))}if(n===1)throw n=Si,pn(t,0),Mt(t,e),be(t,re()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sn(t,De,gt),be(t,re()),null}function gu(t,e){var n=z;z|=1;try{return t(e)}finally{z=n,z===0&&(hr=re()+500,uo&&en())}}function Sn(t){Ft!==null&&Ft.tag===0&&!(z&6)&&nr();var e=z;z|=1;var n=Xe.transition,r=B;try{if(Xe.transition=null,B=1,t)return t()}finally{B=r,Xe.transition=n,z=e,!(z&6)&&en()}}function _u(){je=Gn.current,Y(Gn)}function pn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Y_(n)),se!==null)for(n=se.return;n!==null;){var r=n;switch(Xa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ds();break;case 3:dr(),Y(Me),Y(ke),ou();break;case 5:su(r);break;case 4:dr();break;case 13:Y(J);break;case 19:Y(J);break;case 10:tu(r.type._context);break;case 22:case 23:_u()}n=n.return}if(he=t,se=t=Vt(t.current,null),ye=je=e,ae=0,Si=null,pu=po=wn=0,De=Jr=null,cn!==null){for(e=0;e<cn.length;e++)if(n=cn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}cn=null}return t}function lp(t,e){do{var n=se;try{if(eu(),ps.current=Us,zs){for(var r=Z.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zs=!1}if(vn=0,de=oe=Z=null,qr=!1,yi=0,hu.current=null,n===null||n.return===null){ae=1,Si=e,se=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,c=f.tag;if(!(f.mode&1)&&(c===0||c===11||c===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=Wc(o);if(_!==null){_.flags&=-257,$c(_,o,l,s,e),_.mode&1&&Bc(s,u,e),e=_,a=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(a),e.updateQueue=v}else y.add(a);break e}else{if(!(e&1)){Bc(s,u,e),yu();break e}a=Error(S(426))}}else if(q&&l.mode&1){var k=Wc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),$c(k,o,l,s,e),Ja(fr(a,l));break e}}s=a=fr(a,l),ae!==4&&(ae=2),Jr===null?Jr=[s]:Jr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Hh(s,a,e);Lc(s,p);break e;case 1:l=a;var h=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&($t===null||!$t.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Vh(s,l,e);Lc(s,w);break e}}s=s.return}while(s!==null)}cp(n)}catch(N){e=N,se===n&&n!==null&&(se=n=n.return);continue}break}while(!0)}function ap(){var t=Bs.current;return Bs.current=Us,t===null?Us:t}function yu(){(ae===0||ae===3||ae===2)&&(ae=4),he===null||!(wn&268435455)&&!(po&268435455)||Mt(he,ye)}function Hs(t,e){var n=z;z|=2;var r=ap();(he!==t||ye!==e)&&(gt=null,pn(t,e));do try{wy();break}catch(i){lp(t,i)}while(!0);if(eu(),z=n,Bs.current=r,se!==null)throw Error(S(261));return he=null,ye=0,ae}function wy(){for(;se!==null;)up(se)}function Sy(){for(;se!==null&&!Gg();)up(se)}function up(t){var e=fp(t.alternate,t,je);t.memoizedProps=t.pendingProps,e===null?cp(t):se=e,hu.current=null}function cp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=py(n,e),n!==null){n.flags&=32767,se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ae=6,se=null;return}}else if(n=hy(n,e,je),n!==null){se=n;return}if(e=e.sibling,e!==null){se=e;return}se=e=t}while(e!==null);ae===0&&(ae=5)}function sn(t,e,n){var r=B,i=Xe.transition;try{Xe.transition=null,B=1,Ey(t,e,n,r)}finally{Xe.transition=i,B=r}return null}function Ey(t,e,n,r){do nr();while(Ft!==null);if(z&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(n_(t,s),t===he&&(se=he=null,ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ns||(ns=!0,hp(ks,function(){return nr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xe.transition,Xe.transition=null;var o=B;B=1;var l=z;z|=4,hu.current=null,gy(t,n),ip(n,t),W_(Fl),Is=!!bl,Fl=bl=null,t.current=n,_y(n),Kg(),z=l,B=o,Xe.transition=s}else t.current=n;if(ns&&(ns=!1,Ft=t,$s=i),s=t.pendingLanes,s===0&&($t=null),qg(n.stateNode),be(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,t=ra,ra=null,t;return $s&1&&t.tag!==0&&nr(),s=t.pendingLanes,s&1?t===ia?Zr++:(Zr=0,ia=t):Zr=0,en(),null}function nr(){if(Ft!==null){var t=Hf($s),e=Xe.transition,n=B;try{if(Xe.transition=null,B=16>t?16:t,Ft===null)var r=!1;else{if(t=Ft,Ft=null,$s=0,z&6)throw Error(S(331));var i=z;for(z|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(I=u;I!==null;){var f=I;switch(f.tag){case 0:case 11:case 15:Xr(8,f,s)}var c=f.child;if(c!==null)c.return=f,I=c;else for(;I!==null;){f=I;var d=f.sibling,_=f.return;if(tp(f),f===u){I=null;break}if(d!==null){d.return=_,I=d;break}I=_}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,I=p;break e}I=s.return}}var h=t.current;for(I=h;I!==null;){o=I;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,I=g;else e:for(o=h;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ho(9,l)}}catch(N){te(l,l.return,N)}if(l===o){I=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,I=w;break e}I=l.return}}if(z=i,en(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(io,t)}catch{}r=!0}return r}finally{B=n,Xe.transition=e}}return!1}function nd(t,e,n){e=fr(n,e),e=Hh(t,e,1),t=Wt(t,e,1),e=Ie(),t!==null&&(Pi(t,1,e),be(t,e))}function te(t,e,n){if(t.tag===3)nd(t,t,n);else for(;e!==null;){if(e.tag===3){nd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($t===null||!$t.has(r))){t=fr(n,t),t=Vh(e,t,1),e=Wt(e,t,1),t=Ie(),e!==null&&(Pi(e,1,t),be(e,t));break}}e=e.return}}function Cy(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(ye&n)===n&&(ae===4||ae===3&&(ye&130023424)===ye&&500>re()-mu?pn(t,0):pu|=n),be(t,e)}function dp(t,e){e===0&&(t.mode&1?(e=Gi,Gi<<=1,!(Gi&130023424)&&(Gi=4194304)):e=1);var n=Ie();t=kt(t,e),t!==null&&(Pi(t,e,n),be(t,n))}function xy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dp(t,n)}function ky(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),dp(t,n)}var fp;fp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Me.current)Ae=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ae=!1,fy(t,e,n);Ae=!!(t.flags&131072)}else Ae=!1,q&&e.flags&1048576&&gh(e,Ms,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gs(t,e),t=e.pendingProps;var i=ar(e,ke.current);tr(e,n),i=au(null,e,r,t,i,n);var s=uu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Le(r)?(s=!0,As(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ru(e),i.updater=fo,e.stateNode=i,i._reactInternals=e,Gl(e,r,t,n),e=Yl(null,e,r,!0,s,n)):(e.tag=0,q&&s&&qa(e),Ne(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Iy(r),t=tt(r,t),i){case 0:e=Ql(null,e,r,t,n);break e;case 1:e=Gc(null,e,r,t,n);break e;case 11:e=Hc(null,e,r,t,n);break e;case 14:e=Vc(null,e,r,tt(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Ql(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Gc(t,e,r,i,n);case 3:e:{if(Yh(e),t===null)throw Error(S(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Eh(t,e),Fs(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fr(Error(S(423)),e),e=Kc(t,e,r,n,i);break e}else if(r!==i){i=fr(Error(S(424)),e),e=Kc(t,e,r,n,i);break e}else for(Ue=Bt(e.stateNode.containerInfo.firstChild),Be=e,q=!0,rt=null,n=wh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ur(),r===i){e=Nt(t,e,n);break e}Ne(t,e,r,n)}e=e.child}return e;case 5:return Ch(e),t===null&&$l(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jl(r,i)?o=null:s!==null&&jl(r,s)&&(e.flags|=32),Qh(t,e),Ne(t,e,o,n),e.child;case 6:return t===null&&$l(e),null;case 13:return qh(t,e,n);case 4:return iu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cr(e,null,r,n):Ne(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Hc(t,e,r,i,n);case 7:return Ne(t,e,e.pendingProps,n),e.child;case 8:return Ne(t,e,e.pendingProps.children,n),e.child;case 12:return Ne(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,G(Ls,r._currentValue),r._currentValue=o,s!==null)if(at(s.value,o)){if(s.children===i.children&&!Me.current){e=Nt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=St(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Hl(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(S(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hl(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ne(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,tr(e,n),i=Je(i),r=r(i),e.flags|=1,Ne(t,e,r,n),e.child;case 14:return r=e.type,i=tt(r,e.pendingProps),i=tt(r.type,i),Vc(t,e,r,i,n);case 15:return Gh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),gs(t,e),e.tag=1,Le(r)?(t=!0,As(e)):t=!1,tr(e,n),$h(e,r,i),Gl(e,r,i,n),Yl(null,e,r,!0,t,n);case 19:return Xh(t,e,n);case 22:return Kh(t,e,n)}throw Error(S(156,e.tag))};function hp(t,e){return Uf(t,e)}function Ny(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(t,e,n,r){return new Ny(t,e,n,r)}function vu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Iy(t){if(typeof t=="function")return vu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ja)return 11;if(t===za)return 14}return 2}function Vt(t,e){var n=t.alternate;return n===null?(n=Qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vs(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bn:return mn(n.children,i,s,e);case Fa:o=8,i|=8;break;case gl:return t=Qe(12,n,e,i|2),t.elementType=gl,t.lanes=s,t;case _l:return t=Qe(13,n,e,i),t.elementType=_l,t.lanes=s,t;case yl:return t=Qe(19,n,e,i),t.elementType=yl,t.lanes=s,t;case Cf:return mo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sf:o=10;break e;case Ef:o=9;break e;case ja:o=11;break e;case za:o=14;break e;case Dt:o=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=Qe(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function mn(t,e,n,r){return t=Qe(7,t,r,e),t.lanes=n,t}function mo(t,e,n,r){return t=Qe(22,t,r,e),t.elementType=Cf,t.lanes=n,t.stateNode={isHidden:!1},t}function tl(t,e,n){return t=Qe(6,t,null,e),t.lanes=n,t}function nl(t,e,n){return e=Qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ty(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bo(0),this.expirationTimes=bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wu(t,e,n,r,i,s,o,l,a){return t=new Ty(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qe(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ru(s),t}function Ry(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ln,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pp(t){if(!t)return qt;t=t._reactInternals;e:{if(Nn(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Le(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Le(n))return ph(t,n,e)}return e}function mp(t,e,n,r,i,s,o,l,a){return t=wu(n,r,!0,t,i,s,o,l,a),t.context=pp(null),n=t.current,r=Ie(),i=Ht(n),s=St(r,i),s.callback=e??null,Wt(n,s,i),t.current.lanes=i,Pi(t,i,r),be(t,r),t}function go(t,e,n,r){var i=e.current,s=Ie(),o=Ht(i);return n=pp(n),e.context===null?e.context=n:e.pendingContext=n,e=St(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wt(i,e,o),t!==null&&(ot(t,i,o,s),hs(t,i,o)),o}function Vs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Su(t,e){rd(t,e),(t=t.alternate)&&rd(t,e)}function Py(){return null}var gp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Eu(t){this._internalRoot=t}_o.prototype.render=Eu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));go(t,e,null,null)};_o.prototype.unmount=Eu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sn(function(){go(null,t,null,null)}),e[xt]=null}};function _o(t){this._internalRoot=t}_o.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ot.length&&e!==0&&e<Ot[n].priority;n++);Ot.splice(n,0,t),n===0&&Yf(t)}};function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function id(){}function Dy(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Vs(o);s.call(u)}}var o=mp(e,r,t,0,null,!1,!1,"",id);return t._reactRootContainer=o,t[xt]=o.current,hi(t.nodeType===8?t.parentNode:t),Sn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Vs(a);l.call(u)}}var a=wu(t,0,!1,null,null,!1,!1,"",id);return t._reactRootContainer=a,t[xt]=a.current,hi(t.nodeType===8?t.parentNode:t),Sn(function(){go(e,a,n,r)}),a}function vo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Vs(o);l.call(a)}}go(e,o,t,i)}else o=Dy(n,e,t,i,r);return Vs(o)}Vf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wr(e.pendingLanes);n!==0&&(Wa(e,n|1),be(e,re()),!(z&6)&&(hr=re()+500,en()))}break;case 13:Sn(function(){var r=kt(t,1);if(r!==null){var i=Ie();ot(r,t,1,i)}}),Su(t,1)}};$a=function(t){if(t.tag===13){var e=kt(t,134217728);if(e!==null){var n=Ie();ot(e,t,134217728,n)}Su(t,134217728)}};Gf=function(t){if(t.tag===13){var e=Ht(t),n=kt(t,e);if(n!==null){var r=Ie();ot(n,t,e,r)}Su(t,e)}};Kf=function(){return B};Qf=function(t,e){var n=B;try{return B=t,e()}finally{B=n}};Tl=function(t,e,n){switch(e){case"input":if(Sl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ao(r);if(!i)throw Error(S(90));kf(r),Sl(r,i)}}}break;case"textarea":If(t,n);break;case"select":e=n.value,e!=null&&Xn(t,!!n.multiple,e,!1)}};Mf=gu;Lf=Sn;var Ay={usingClientEntryPoint:!1,Events:[Ai,Un,ao,Af,Of,gu]},Lr={findFiberByHostInstance:un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Oy={bundleType:Lr.bundleType,version:Lr.version,rendererPackageName:Lr.rendererPackageName,rendererConfig:Lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jf(t),t===null?null:t.stateNode},findFiberByHostInstance:Lr.findFiberByHostInstance||Py,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rs.isDisabled&&rs.supportsFiber)try{io=rs.inject(Oy),ht=rs}catch{}}He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ay;He.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cu(e))throw Error(S(200));return Ry(t,e,null,n)};He.createRoot=function(t,e){if(!Cu(t))throw Error(S(299));var n=!1,r="",i=gp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wu(t,1,!1,null,null,n,!1,r,i),t[xt]=e.current,hi(t.nodeType===8?t.parentNode:t),new Eu(e)};He.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=jf(e),t=t===null?null:t.stateNode,t};He.flushSync=function(t){return Sn(t)};He.hydrate=function(t,e,n){if(!yo(e))throw Error(S(200));return vo(null,t,e,!0,n)};He.hydrateRoot=function(t,e,n){if(!Cu(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mp(e,null,t,1,n??null,i,!1,s,o),t[xt]=e.current,hi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _o(e)};He.render=function(t,e,n){if(!yo(e))throw Error(S(200));return vo(null,t,e,!1,n)};He.unmountComponentAtNode=function(t){if(!yo(t))throw Error(S(40));return t._reactRootContainer?(Sn(function(){vo(null,null,t,!1,function(){t._reactRootContainer=null,t[xt]=null})}),!0):!1};He.unstable_batchedUpdates=gu;He.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yo(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return vo(t,e,n,!1,r)};He.version="18.3.1-next-f1338f8080-20240426";function _p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_p)}catch(t){console.error(t)}}_p(),_f.exports=He;var My=_f.exports,yp,sd=My;yp=sd.createRoot,sd.hydrateRoot;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ly(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(c){o(c)}}function a(f){try{u(r.throw(f))}catch(c){o(c)}}function u(f){f.done?s(f.value):i(f.value).then(l,a)}u((r=r.apply(t,[])).next())})}function by(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kn=function(){return Kn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kn.apply(this,arguments)},vp=function(t){return{loading:t==null,value:t}},Fy=function(){return function(t,e){switch(e.type){case"error":return Kn(Kn({},t),{error:e.error,loading:!1,value:void 0});case"reset":return vp(e.defaultValue);case"value":return Kn(Kn({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},jy=function(t){var e=t?t():void 0,n=P.useReducer(Fy(),vp(e)),r=n[0],i=n[1],s=P.useCallback(function(){var a=t?t():void 0;i({type:"reset",defaultValue:a})},[t]),o=P.useCallback(function(a){i({type:"error",error:a})},[]),l=P.useCallback(function(a){i({type:"value",value:a})},[]);return P.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:l,value:r.value}},[r.error,r.loading,s,o,l,r.value])},zy=function(t,e){var n=jy(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,l=n.value;return P.useEffect(function(){var a=rf(t,function(u){return Ly(void 0,void 0,void 0,function(){var f;return by(this,function(c){switch(c.label){case 0:return[3,4];case 1:return c.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return c.sent(),[3,4];case 3:return f=c.sent(),s(f),[3,4];case 4:return o(u),[2]}})})},s);return function(){a()}},[t]),[l,i,r]},od={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=function(t,e){if(!t)throw Er(e)},Er=function(t){return new Error("Firebase Database ("+wp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Uy=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,f=s>>2,c=(s&3)<<4|l>>4;let d=(l&15)<<2|u>>6,_=u&63;a||(_=64,o||(d=64)),r.push(n[f],n[c],n[d],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Uy(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new By;const d=s<<2|l>>4;if(r.push(d),u!==64){const _=l<<4&240|u>>2;if(r.push(_),c!==64){const y=u<<6&192|c;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class By extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ep=function(t){const e=Sp(t);return xu.encodeByteArray(e,!0)},Gs=function(t){return Ep(t).replace(/\./g,"")},la=function(t){try{return xu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t){return Cp(void 0,t)}function Cp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$y(n)||(t[n]=Cp(t[n],e[n]));return t}function $y(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=()=>Hy().__FIREBASE_DEFAULTS__,Gy=()=>{if(typeof process>"u"||typeof od>"u")return;const t=od.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ky=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&la(t[1]);return e&&JSON.parse(e)},xp=()=>{try{return Vy()||Gy()||Ky()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qy=t=>{var e,n;return(n=(e=xp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kp=t=>{const e=Qy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Np=()=>{var t;return(t=xp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gs(JSON.stringify(n)),Gs(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ip(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qy())}function Xy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jy(){return wp.NODE_ADMIN===!0}function Zy(){try{return typeof indexedDB=="object"}catch{return!1}}function ev(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="FirebaseError";class Mi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tv,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tp.prototype.create)}}class Tp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?nv(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Mi(i,l,r)}}function nv(t,e){return t.replace(rv,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const rv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){return JSON.parse(t)}function ge(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ei(la(s[0])||""),n=Ei(la(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},iv=function(t){const e=Rp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sv=function(t){const e=Rp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function aa(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ua(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ld(s)&&ld(o)){if(!ua(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ld(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,f;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),f=1518500249):(u=s^o^l,f=1859775393):c<60?(u=s&o|l&(s|o),f=2400959708):(u=s^o^l,f=3395469782);const d=(i<<5|i>>>27)+u+a+f+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function mr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Lt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dv(e))try{this.getOrInitializeService({instanceIdentifier:on})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=on){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=on){return this.instances.has(e)}getOptions(e=on){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=on){return this.component?this.component.multipleInstances?e:on:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cv(t){return t===on?void 0:t}function dv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(H||(H={}));const hv={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},pv=H.INFO,mv={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},gv=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=mv[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=pv,this._logHandler=gv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}}const _v=(t,e)=>e.some(n=>t instanceof n);let ad,ud;function yv(){return ad||(ad=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vv(){return ud||(ud=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dp=new WeakMap,ca=new WeakMap,Ap=new WeakMap,rl=new WeakMap,ku=new WeakMap;function wv(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Gt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dp.set(n,t)}).catch(()=>{}),ku.set(e,t),e}function Sv(t){if(ca.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ca.set(t,e)}let da={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ca.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ev(t){da=t(da)}function Cv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(il(this),e,...n);return Ap.set(r,e.sort?e.sort():[e]),Gt(r)}:vv().includes(t)?function(...e){return t.apply(il(this),e),Gt(Dp.get(this))}:function(...e){return Gt(t.apply(il(this),e))}}function xv(t){return typeof t=="function"?Cv(t):(t instanceof IDBTransaction&&Sv(t),_v(t,yv())?new Proxy(t,da):t)}function Gt(t){if(t instanceof IDBRequest)return wv(t);if(rl.has(t))return rl.get(t);const e=xv(t);return e!==t&&(rl.set(t,e),ku.set(e,t)),e}const il=t=>ku.get(t);function kv(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Gt(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Gt(o.result),a.oldVersion,a.newVersion,Gt(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Nv=["get","getKey","getAll","getAllKeys","count"],Iv=["put","add","delete","clear"],sl=new Map;function cd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sl.get(e))return sl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Iv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nv.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return sl.set(e,s),s}Ev(t=>({...t,get:(e,n,r)=>cd(e,n)||t.get(e,n,r),has:(e,n)=>!!cd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Rv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Rv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fa="@firebase/app",dd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new Pp("@firebase/app"),Pv="@firebase/app-compat",Dv="@firebase/analytics-compat",Av="@firebase/analytics",Ov="@firebase/app-check-compat",Mv="@firebase/app-check",Lv="@firebase/auth",bv="@firebase/auth-compat",Fv="@firebase/database",jv="@firebase/data-connect",zv="@firebase/database-compat",Uv="@firebase/functions",Bv="@firebase/functions-compat",Wv="@firebase/installations",$v="@firebase/installations-compat",Hv="@firebase/messaging",Vv="@firebase/messaging-compat",Gv="@firebase/performance",Kv="@firebase/performance-compat",Qv="@firebase/remote-config",Yv="@firebase/remote-config-compat",qv="@firebase/storage",Xv="@firebase/storage-compat",Jv="@firebase/firestore",Zv="@firebase/vertexai-preview",e0="@firebase/firestore-compat",t0="firebase",n0="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]",r0={[fa]:"fire-core",[Pv]:"fire-core-compat",[Av]:"fire-analytics",[Dv]:"fire-analytics-compat",[Mv]:"fire-app-check",[Ov]:"fire-app-check-compat",[Lv]:"fire-auth",[bv]:"fire-auth-compat",[Fv]:"fire-rtdb",[jv]:"fire-data-connect",[zv]:"fire-rtdb-compat",[Uv]:"fire-fn",[Bv]:"fire-fn-compat",[Wv]:"fire-iid",[$v]:"fire-iid-compat",[Hv]:"fire-fcm",[Vv]:"fire-fcm-compat",[Gv]:"fire-perf",[Kv]:"fire-perf-compat",[Qv]:"fire-rc",[Yv]:"fire-rc-compat",[qv]:"fire-gcs",[Xv]:"fire-gcs-compat",[Jv]:"fire-fst",[e0]:"fire-fst-compat",[Zv]:"fire-vertex","fire-js":"fire-js",[t0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Map,i0=new Map,pa=new Map;function fd(t,e){try{t.container.addComponent(e)}catch(n){It.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(pa.has(e))return It.debug(`There were multiple attempts to register component ${e}.`),!1;pa.set(e,t);for(const n of Qs.values())fd(n,t);for(const n of i0.values())fd(n,t);return!0}function Op(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kt=new Tp("app","Firebase",s0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=n0;function a0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ha,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Kt.create("bad-app-name",{appName:String(i)});if(n||(n=Np()),!n)throw Kt.create("no-options");const s=Qs.get(i);if(s){if(ua(n,s.options)&&ua(r,s.config))return s;throw Kt.create("duplicate-app",{appName:i})}const o=new fv(i);for(const a of pa.values())o.addComponent(a);const l=new o0(n,r,o);return Qs.set(i,l),l}function Mp(t=ha){const e=Qs.get(t);if(!e&&t===ha&&Np())return a0();if(!e)throw Kt.create("no-app",{appName:t});return e}function gn(t,e,n){var r;let i=(r=r0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),It.warn(l.join(" "));return}Ci(new gr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="firebase-heartbeat-database",c0=1,xi="firebase-heartbeat-store";let ol=null;function Lp(){return ol||(ol=kv(u0,c0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kt.create("idb-open",{originalErrorMessage:t.message})})),ol}async function d0(t){try{const n=(await Lp()).transaction(xi),r=await n.objectStore(xi).get(bp(t));return await n.done,r}catch(e){if(e instanceof Mi)It.warn(e.message);else{const n=Kt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});It.warn(n.message)}}}async function hd(t,e){try{const r=(await Lp()).transaction(xi,"readwrite");await r.objectStore(xi).put(e,bp(t)),await r.done}catch(n){if(n instanceof Mi)It.warn(n.message);else{const r=Kt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});It.warn(r.message)}}}function bp(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=1024,h0=30*24*60*60*1e3;class p0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=h0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){It.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pd(),{heartbeatsToSend:r,unsentEntries:i}=m0(this._heartbeatsCache.heartbeats),s=Gs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return It.warn(n),""}}}function pd(){return new Date().toISOString().substring(0,10)}function m0(t,e=f0){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),md(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),md(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class g0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zy()?ev().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await d0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function md(t){return Gs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t){Ci(new gr("platform-logger",e=>new Tv(e),"PRIVATE")),Ci(new gr("heartbeat",e=>new p0(e),"PRIVATE")),gn(fa,dd,t),gn(fa,dd,"esm2017"),gn("fire-js","")}_0("");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="us-central1";class v0{constructor(e,n,r,i,s=ma,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new y0(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=ma}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function w0(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const gd="@firebase/functions",_d="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="auth-internal",E0="app-check-internal",C0="messaging-internal";function x0(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(S0),l=r.getProvider(C0),a=r.getProvider(E0);return new v0(s,o,l,a,i,t)};Ci(new gr(Fp,n,"PUBLIC").setMultipleInstances(!0)),gn(gd,_d,e),gn(gd,_d,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t=Mp(),e=ma){const r=Op(In(t),Fp).getImmediate({identifier:e}),i=kp("functions");return i&&N0(r,...i),r}function N0(t,e,n){w0(In(t),e,n)}x0(fetch.bind(self));var yd={};const vd="@firebase/database",wd="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp="";function I0(t){jp=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ge(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ei(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return mt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new T0(e)}}catch{}return new R0},fn=zp("localStorage"),P0=zp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Pp("@firebase/database"),D0=function(){let t=1;return function(){return t++}}(),Up=function(t){const e=av(t),n=new lv;n.update(e);const r=n.digest();return xu.encodeByteArray(r)},Li=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Li.apply(null,r):typeof r=="object"?e+=ge(r):e+=r,e+=" "}return e};let ei=null,Sd=!0;const A0=function(t,e){C(!0,"Can't turn on custom loggers persistently."),rr.logLevel=H.VERBOSE,ei=rr.log.bind(rr)},me=function(...t){if(Sd===!0&&(Sd=!1,ei===null&&P0.get("logging_enabled")===!0&&A0()),ei){const e=Li.apply(null,t);ei(e)}},bi=function(t){return function(...e){me(t,...e)}},ga=function(...t){const e="FIREBASE INTERNAL ERROR: "+Li(...t);rr.error(e)},Tt=function(...t){const e=`FIREBASE FATAL ERROR: ${Li(...t)}`;throw rr.error(e),new Error(e)},We=function(...t){const e="FIREBASE WARNING: "+Li(...t);rr.warn(e)},O0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&We("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},So=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},M0=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_r="[MIN_NAME]",En="[MAX_NAME]",Tn=function(t,e){if(t===e)return 0;if(t===_r||e===En)return-1;if(e===_r||t===En)return 1;{const n=Ed(t),r=Ed(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},L0=function(t,e){return t===e?0:t<e?-1:1},br=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ge(e))},Nu=function(t){if(typeof t!="object"||t===null)return ge(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ge(e[r]),n+=":",n+=Nu(t[e[r]]);return n+="}",n},Bp=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Fe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Wp=function(t){C(!So(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let c="";for(a=0;a<64;a+=8){let d=parseInt(f.substr(a,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},b0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},F0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},j0=new RegExp("^-?(0*)\\d{1,10}$"),z0=-2147483648,U0=2147483647,Ed=function(t){if(j0.test(t)){const e=Number(t);if(e>=z0&&e<=U0)return e}return null},Cr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw We("Exception was thrown by user callback.",n),e},Math.floor(0))}},B0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ti=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){We(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(me("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',We(e)}}class ws{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ws.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="5",$p="v",Hp="s",Vp="r",Gp="f",Kp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qp="ls",Yp="p",_a="ac",qp="websocket",Xp="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function H0(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Zp(t,e,n){C(typeof e=="string","typeof type must == string"),C(typeof n=="object","typeof params must == object");let r;if(e===qp)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Xp)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);H0(t)&&(n.ns=t.namespace);const i=[];return Fe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.counters_={}}incrementCounter(e,n=1){mt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Wy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll={},al={};function Tu(t){const e=t.toString();return ll[e]||(ll[e]=new V0),ll[e]}function G0(t,e){const n=t.toString();return al[n]||(al[n]=e()),al[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="start",Q0="close",Y0="pLPCommand",q0="pRTLPCB",em="id",tm="pw",nm="ser",X0="cb",J0="seg",Z0="ts",ew="d",tw="dframe",rm=1870,im=30,nw=rm-im,rw=25e3,iw=3e4;class Qn{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bi(e),this.stats_=Tu(n),this.urlFn=a=>(this.appCheckToken&&(a[_a]=this.appCheckToken),Zp(n,Xp,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new K0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iw)),M0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ru((...s)=>{const[o,l,a,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Cd)this.id=l,this.password=a;else if(o===Q0)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Cd]="t",r[nm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[X0]=this.scriptTagHolder.uniqueCallbackIdentifier),r[$p]=Iu,this.transportSessionId&&(r[Hp]=this.transportSessionId),this.lastSessionId&&(r[Qp]=this.lastSessionId),this.applicationId&&(r[Yp]=this.applicationId),this.appCheckToken&&(r[_a]=this.appCheckToken),typeof location<"u"&&location.hostname&&Kp.test(location.hostname)&&(r[Vp]=Gp);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qn.forceAllow_=!0}static forceDisallow(){Qn.forceDisallow_=!0}static isAvailable(){return Qn.forceAllow_?!0:!Qn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b0()&&!F0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ge(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Ep(n),i=Bp(r,nw);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[tw]="t",r[em]=e,r[tm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ge(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ru{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=D0(),window[Y0+this.uniqueCallbackIdentifier]=e,window[q0+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ru.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){me("frame writing exception"),l.stack&&me(l.stack),me(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||me("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[em]=this.myID,e[tm]=this.myPW,e[nm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+im+r.length<=rm;){const o=this.pendingSegs.shift();r=r+"&"+J0+i+"="+o.seg+"&"+Z0+i+"="+o.ts+"&"+ew+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(rw)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{me("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=16384,ow=45e3;let Ys=null;typeof MozWebSocket<"u"?Ys=MozWebSocket:typeof WebSocket<"u"&&(Ys=WebSocket);class it{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bi(this.connId),this.stats_=Tu(n),this.connURL=it.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[$p]=Iu,typeof location<"u"&&location.hostname&&Kp.test(location.hostname)&&(o[Vp]=Gp),n&&(o[Hp]=n),r&&(o[Qp]=r),i&&(o[_a]=i),s&&(o[Yp]=s),Zp(e,qp,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fn.set("previous_websocket_failure",!0);try{let r;Jy(),this.mySock=new Ys(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){it.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ys!==null&&!it.forceDisallow_}static previouslyFailed(){return fn.isInMemoryStorage||fn.get("previous_websocket_failure")===!0}markConnectionHealthy(){fn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ei(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(C(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ge(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Bp(n,sw);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ow))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}it.responsesRequiredToBeHealthy=2;it.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Qn,it]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=it&&it.isAvailable();let r=n&&!it.previouslyFailed();if(e.webSocketOnly&&(n||We("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[it];else{const i=this.transports_=[];for(const s of ki.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);ki.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ki.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=6e4,aw=5e3,uw=10*1024,cw=100*1024,ul="t",xd="d",dw="s",kd="r",fw="e",Nd="o",Id="a",Td="n",Rd="p",hw="h";class pw{constructor(e,n,r,i,s,o,l,a,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bi("c:"+this.id+":"),this.transportManager_=new ki(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ti(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ul in e){const n=e[ul];n===Id?this.upgradeIfSecondaryHealthy_():n===kd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Nd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=br("t",e),r=br("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Rd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Id,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Td,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=br("t",e),r=br("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=br(ul,e);if(xd in e){const r=e[xd];if(n===hw){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Td){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===dw?this.onConnectionShutdown_(r):n===kd?this.onReset_(r):n===fw?ga("Server Error: "+r):n===Nd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ga("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Iu!==r&&We("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ti(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lw))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ti(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Rd,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends om{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ip()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new qs}getInitialEvent(e){return C(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=32,Dd=768;class ${constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function W(){return new $("")}function L(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xt(t){return t.pieces_.length-t.pieceNum_}function V(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $(t.pieces_,e)}function Pu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mw(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ni(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function lm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $(e,0)}function ie(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof $)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new $(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function Ye(t,e){const n=L(t),r=L(e);if(n===null)return e;if(n===r)return Ye(V(t),V(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gw(t,e){const n=Ni(t,0),r=Ni(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Tn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function am(t,e){if(Xt(t)!==Xt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qe(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xt(t)>Xt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class _w{constructor(e,n){this.errorPrefix_=n,this.parts_=Ni(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=wo(this.parts_[r]);um(this)}}function yw(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=wo(e),um(t)}function vw(t){const e=t.parts_.pop();t.byteLength_-=wo(e),t.parts_.length>0&&(t.byteLength_-=1)}function um(t){if(t.byteLength_>Dd)throw new Error(t.errorPrefix_+"has a key path longer than "+Dd+" bytes ("+t.byteLength_+").");if(t.parts_.length>Pd)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pd+") or object contains a cycle "+ln(t))}function ln(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends om{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Du}getInitialEvent(e){return C(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=1e3,ww=60*5*1e3,Ad=30*1e3,Sw=1.3,Ew=3e4,Cw="server_kill",Od=3;class Et extends sm{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Et.nextPersistentConnectionId_++,this.log_=bi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fr,this.maxReconnectDelay_=ww,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Du.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&qs.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ge(s)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Lt,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Et.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&mt(e,"w")){const r=pr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();We(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||sv(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ad)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=iv(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ge(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ga("Unrecognized action received from server: "+ge(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ew&&(this.reconnectDelay_=Fr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Sw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Et.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){C(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?me("getToken() completed but was canceled"):(me("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,l=new pw(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{We(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(Cw)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&We(c),a())}}}interrupt(e){me("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){me("Resuming connection for reason: "+e),delete this.interruptReasons_[e],aa(this.interruptReasons_)&&(this.reconnectDelay_=Fr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Nu(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new $(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){me("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Od&&(this.reconnectDelay_=Ad,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){me("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Od&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+jp.replace(/\./g,"-")]=1,Ip()?e["framework.cordova"]=1:Xy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=qs.getInstance().currentlyOnline();return aa(this.interruptReasons_)&&e}}Et.nextPersistentConnectionId_=0;Et.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new j(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new j(_r,e),i=new j(_r,n);return this.compare(r,i)!==0}minPost(){return j.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is;class cm extends Eo{static get __EMPTY_NODE(){return is}static set __EMPTY_NODE(e){is=e}compare(e,n){return Tn(e.name,n.name)}isDefinedOn(e){throw Er("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(En,is)}makePost(e,n){return C(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,is)}toString(){return".key"}}const ir=new cm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class fe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??fe.RED,this.left=i??Oe.EMPTY_NODE,this.right=s??Oe.EMPTY_NODE}copy(e,n,r,i,s){return new fe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Oe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Oe.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}fe.RED=!0;fe.BLACK=!1;class xw{copy(e,n,r,i,s){return this}insert(e,n,r){return new fe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Oe{constructor(e,n=Oe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Oe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,fe.BLACK,null,null))}remove(e){return new Oe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fe.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ss(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ss(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ss(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ss(this.root_,null,this.comparator_,!0,e)}}Oe.EMPTY_NODE=new xw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){return Tn(t.name,e.name)}function Au(t,e){return Tn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya;function Nw(t){ya=t}const dm=function(t){return typeof t=="number"?"number:"+Wp(t):"string:"+t},fm=function(t){if(t.isLeafNode()){const e=t.val();C(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mt(e,".sv"),"Priority must be a string or number.")}else C(t===ya||t.isEmpty(),"priority of unexpected type.");C(t===ya||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md;class ce{constructor(e,n=ce.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,C(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fm(this.priorityNode_)}static set __childrenNodeConstructor(e){Md=e}static get __childrenNodeConstructor(){return Md}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ce(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ce.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return F(e)?this:L(e)===".priority"?this.priorityNode_:ce.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ce.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=L(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(C(r!==".priority"||Xt(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ce.__childrenNodeConstructor.EMPTY_NODE.updateChild(V(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dm(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Wp(this.value_):e+=this.value_,this.lazyHash_=Up(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ce.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ce.__childrenNodeConstructor?-1:(C(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ce.VALUE_TYPE_ORDER.indexOf(n),s=ce.VALUE_TYPE_ORDER.indexOf(r);return C(i>=0,"Unknown leaf type: "+n),C(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ce.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm,pm;function Iw(t){hm=t}function Tw(t){pm=t}class Rw extends Eo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Tn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(En,new ce("[PRIORITY-POST]",pm))}makePost(e,n){const r=hm(e);return new j(n,new ce("[PRIORITY-POST]",r))}toString(){return".priority"}}const _e=new Rw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=Math.log(2);class Dw{constructor(e){const n=s=>parseInt(Math.log(s)/Pw,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xs=function(t,e,n,r){t.sort(e);const i=function(a,u){const f=u-a;let c,d;if(f===0)return null;if(f===1)return c=t[a],d=n?n(c):c,new fe(d,c.node,fe.BLACK,null,null);{const _=parseInt(f/2,10)+a,y=i(a,_),v=i(_+1,u);return c=t[_],d=n?n(c):c,new fe(d,c.node,fe.BLACK,y,v)}},s=function(a){let u=null,f=null,c=t.length;const d=function(y,v){const k=c-y,p=c;c-=y;const h=i(k+1,p),g=t[k],w=n?n(g):g;_(new fe(w,g.node,v,null,h))},_=function(y){u?(u.left=y,u=y):(f=y,u=y)};for(let y=0;y<a.count;++y){const v=a.nextBitIsOne(),k=Math.pow(2,a.count-(y+1));v?d(k,fe.BLACK):(d(k,fe.BLACK),d(k,fe.RED))}return f},o=new Dw(t.length),l=s(o);return new Oe(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl;const On={};class wt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(On&&_e,"ChildrenNode.ts has not been loaded"),cl=cl||new wt({".priority":On},{".priority":_e}),cl}get(e){const n=pr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Oe?n:null}hasIndex(e){return mt(this.indexSet_,e.toString())}addIndex(e,n){C(e!==ir,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(j.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Xs(r,e.getCompare()):l=On;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const f=Object.assign({},this.indexes_);return f[a]=l,new wt(f,u)}addToIndexes(e,n){const r=Ks(this.indexes_,(i,s)=>{const o=pr(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===On)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(j.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Xs(l,o.getCompare())}else return On;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new j(e.name,l))),a.insert(e,e.node)}});return new wt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ks(this.indexes_,i=>{if(i===On)return i;{const s=n.get(e.name);return s?i.remove(new j(e.name,s)):i}});return new wt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jr;class U{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fm(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return jr||(jr=new U(new Oe(Au),null,wt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jr}updatePriority(e){return this.children_.isEmpty()?this:new U(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?jr:n}}getChild(e){const n=L(e);return n===null?this:this.getImmediateChild(n).getChild(V(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(C(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new j(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?jr:this.priorityNode_;return new U(i,o,s)}}updateChild(e,n){const r=L(e);if(r===null)return n;{C(L(e)!==".priority"||Xt(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(V(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(_e,(o,l)=>{n[o]=l.val(e),r++,s&&U.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+dm(this.getPriority().val())+":"),this.forEachChild(_e,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Up(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new j(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new j(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new j(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,j.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,j.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fi?-1:0}withIndex(e){if(e===ir||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new U(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ir||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(_e),i=n.getIterator(_e);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ir?null:this.indexMap_.get(e.toString())}}U.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Aw extends U{constructor(){super(new Oe(Au),U.EMPTY_NODE,wt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return U.EMPTY_NODE}isEmpty(){return!1}}const Fi=new Aw;Object.defineProperties(j,{MIN:{value:new j(_r,U.EMPTY_NODE)},MAX:{value:new j(En,Fi)}});cm.__EMPTY_NODE=U.EMPTY_NODE;ce.__childrenNodeConstructor=U;Nw(Fi);Tw(Fi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=!0;function le(t,e=null){if(t===null)return U.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),C(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ce(n,le(e))}if(!(t instanceof Array)&&Ow){const n=[];let r=!1;if(Fe(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=le(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new j(o,a)))}}),n.length===0)return U.EMPTY_NODE;const s=Xs(n,kw,o=>o.name,Au);if(r){const o=Xs(n,_e.getCompare());return new U(s,le(e),new wt({".priority":o},{".priority":_e}))}else return new U(s,le(e),wt.Default)}else{let n=U.EMPTY_NODE;return Fe(t,(r,i)=>{if(mt(t,r)&&r.substring(0,1)!=="."){const s=le(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(le(e))}}Iw(le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Eo{constructor(e){super(),this.indexPath_=e,C(!F(e)&&L(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Tn(e.name,n.name):s}makePost(e,n){const r=le(e),i=U.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){const e=U.EMPTY_NODE.updateChild(this.indexPath_,Fi);return new j(En,e)}toString(){return Ni(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Eo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Tn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){const r=le(e);return new j(n,r)}toString(){return".value"}}const bw=new Lw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t){return{type:"value",snapshotNode:t}}function jw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zw(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ld(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Uw(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_e}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_r}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:En}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_e}copy(){const e=new Ou;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bd(t){const e={};if(t.isDefault())return e;let n;if(t.index_===_e?n="$priority":t.index_===bw?n="$value":t.index_===ir?n="$key":(C(t.index_ instanceof Mw,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ge(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ge(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ge(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ge(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ge(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Fd(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==_e&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends sm{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Js.getListenId_(e,r),l={};this.listens_[o]=l;const a=bd(e._queryParams);this.restRequest_(s+".json",a,(u,f)=>{let c=f;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),pr(this.listens_,o)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=Js.getListenId_(e,n);delete this.listens_[r]}get(e){const n=bd(e._queryParams),r=e._path.toString(),i=new Lt;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ov(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Ei(l.responseText)}catch{We("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&We("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return{value:null,children:new Map}}function xr(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=L(e);t.children.has(r)||t.children.set(r,Zs());const i=t.children.get(r);e=V(e),xr(i,e,n)}}function va(t,e){if(F(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(_e,(r,i)=>{xr(t,new $(r),i)}),va(t,e)}}else if(t.children.size>0){const n=L(e);return e=V(e),t.children.has(n)&&va(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function wa(t,e,n){t.value!==null?n(e,t.value):Ww(t,(r,i)=>{const s=new $(e.toString()+"/"+r);wa(i,s,n)})}function Ww(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Fe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=10*1e3,Hw=30*1e3,Vw=5*60*1e3;class Gw{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $w(e);const r=jd+(Hw-jd)*Math.random();ti(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Fe(e,(i,s)=>{s>0&&mt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ti(this.reportStats_.bind(this),Math.floor(Math.random()*2*Vw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ft||(ft={}));function mm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _m(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ft.ACK_USER_WRITE,this.source=mm()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $(e));return new eo(W(),n,this.revert)}}else return C(L(this.path)===e,"operationForChild called for unrelated child."),new eo(V(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ft.OVERWRITE}operationForChild(e){return F(this.path)?new Cn(this.source,W(),this.snap.getImmediateChild(e)):new Cn(this.source,V(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ft.MERGE}operationForChild(e){if(F(this.path)){const n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new Cn(this.source,W(),n.value):new Ii(this.source,W(),n)}else return C(L(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ii(this.source,V(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const n=L(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Kw(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Uw(o.childName,o.snapshotNode))}),zr(t,i,"child_removed",e,r,n),zr(t,i,"child_added",e,r,n),zr(t,i,"child_moved",s,r,n),zr(t,i,"child_changed",e,r,n),zr(t,i,"value",e,r,n),i}function zr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>Yw(t,l,a)),o.forEach(l=>{const a=Qw(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function Qw(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Yw(t,e,n){if(e.childName==null||n.childName==null)throw Er("Should only compare child_ events.");const r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e){return{eventCache:t,serverCache:e}}function ni(t,e,n,r){return ym(new Mu(e,n,r),t.serverCache)}function vm(t,e,n,r){return ym(t.eventCache,new Mu(e,n,r))}function Sa(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl;const qw=()=>(dl||(dl=new Oe(L0)),dl);class Q{constructor(e,n=qw()){this.value=e,this.children=n}static fromObject(e){let n=new Q(null);return Fe(e,(r,i)=>{n=n.set(new $(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(F(e))return null;{const r=L(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(V(e),n);return s!=null?{path:ie(new $(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const n=L(e),r=this.children.get(n);return r!==null?r.subtree(V(e)):new Q(null)}}set(e,n){if(F(e))return new Q(n,this.children);{const r=L(e),s=(this.children.get(r)||new Q(null)).set(V(e),n),o=this.children.insert(r,s);return new Q(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new Q(null):new Q(null,this.children);{const n=L(e),r=this.children.get(n);if(r){const i=r.remove(V(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Q(null):new Q(this.value,s)}else return this}}get(e){if(F(e))return this.value;{const n=L(e),r=this.children.get(n);return r?r.get(V(e)):null}}setTree(e,n){if(F(e))return n;{const r=L(e),s=(this.children.get(r)||new Q(null)).setTree(V(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Q(this.value,o)}}fold(e){return this.fold_(W(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ie(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,W(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(F(e))return null;{const s=L(e),o=this.children.get(s);return o?o.findOnPath_(V(e),ie(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,W(),n)}foreachOnPath_(e,n,r){if(F(e))return this;{this.value&&r(n,this.value);const i=L(e),s=this.children.get(i);return s?s.foreachOnPath_(V(e),ie(n,i),r):new Q(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ie(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.writeTree_=e}static empty(){return new lt(new Q(null))}}function ri(t,e,n){if(F(e))return new lt(new Q(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ye(i,e);return s=s.updateChild(o,n),new lt(t.writeTree_.set(i,s))}else{const i=new Q(n),s=t.writeTree_.setTree(e,i);return new lt(s)}}}function zd(t,e,n){let r=t;return Fe(n,(i,s)=>{r=ri(r,ie(e,i),s)}),r}function Ud(t,e){if(F(e))return lt.empty();{const n=t.writeTree_.setTree(e,new Q(null));return new lt(n)}}function Ea(t,e){return Rn(t,e)!=null}function Rn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ye(n.path,e)):null}function Bd(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(_e,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function Qt(t,e){if(F(e))return t;{const n=Rn(t,e);return n!=null?new lt(new Q(n)):new lt(t.writeTree_.subtree(e))}}function Ca(t){return t.writeTree_.isEmpty()}function yr(t,e){return wm(W(),t.writeTree_,e)}function wm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(C(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=wm(ie(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ie(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){return Nm(e,t)}function Xw(t,e,n,r,i){C(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ri(t.visibleWrites,e,n)),t.lastWriteId=r}function Jw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Zw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&eS(l,r.path)?i=!1:qe(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return tS(t),!0;if(r.snap)t.visibleWrites=Ud(t.visibleWrites,r.path);else{const l=r.children;Fe(l,a=>{t.visibleWrites=Ud(t.visibleWrites,ie(r.path,a))})}return!0}else return!1}function eS(t,e){if(t.snap)return qe(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&qe(ie(t.path,n),e))return!0;return!1}function tS(t){t.visibleWrites=Em(t.allWrites,nS,W()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nS(t){return t.visible}function Em(t,e,n){let r=lt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)qe(n,o)?(l=Ye(n,o),r=ri(r,l,s.snap)):qe(o,n)&&(l=Ye(o,n),r=ri(r,W(),s.snap.getChild(l)));else if(s.children){if(qe(n,o))l=Ye(n,o),r=zd(r,l,s.children);else if(qe(o,n))if(l=Ye(o,n),F(l))r=zd(r,W(),s.children);else{const a=pr(s.children,L(l));if(a){const u=a.getChild(V(l));r=ri(r,W(),u)}}}else throw Er("WriteRecord should have .snap or .children")}}return r}function Cm(t,e,n,r,i){if(!r&&!i){const s=Rn(t.visibleWrites,e);if(s!=null)return s;{const o=Qt(t.visibleWrites,e);if(Ca(o))return n;if(n==null&&!Ea(o,W()))return null;{const l=n||U.EMPTY_NODE;return yr(o,l)}}}else{const s=Qt(t.visibleWrites,e);if(!i&&Ca(s))return n;if(!i&&n==null&&!Ea(s,W()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(qe(u.path,e)||qe(e,u.path))},l=Em(t.allWrites,o,e),a=n||U.EMPTY_NODE;return yr(l,a)}}}function rS(t,e,n){let r=U.EMPTY_NODE;const i=Rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_e,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Qt(t.visibleWrites,e);return n.forEachChild(_e,(o,l)=>{const a=yr(Qt(s,new $(o)),l);r=r.updateImmediateChild(o,a)}),Bd(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Qt(t.visibleWrites,e);return Bd(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function iS(t,e,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ie(e,n);if(Ea(t.visibleWrites,s))return null;{const o=Qt(t.visibleWrites,s);return Ca(o)?i.getChild(n):yr(o,i.getChild(n))}}function sS(t,e,n,r){const i=ie(e,n),s=Rn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Qt(t.visibleWrites,i);return yr(o,r.getNode().getImmediateChild(n))}else return null}function oS(t,e){return Rn(t.visibleWrites,e)}function lS(t,e,n,r,i,s,o){let l;const a=Qt(t.visibleWrites,e),u=Rn(a,W());if(u!=null)l=u;else if(n!=null)l=yr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],c=o.getCompare(),d=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let _=d.getNext();for(;_&&f.length<i;)c(_,r)!==0&&f.push(_),_=d.getNext();return f}else return[]}function aS(){return{visibleWrites:lt.empty(),allWrites:[],lastWriteId:-1}}function xa(t,e,n,r){return Cm(t.writeTree,t.treePath,e,n,r)}function xm(t,e){return rS(t.writeTree,t.treePath,e)}function Wd(t,e,n,r){return iS(t.writeTree,t.treePath,e,n,r)}function to(t,e){return oS(t.writeTree,ie(t.treePath,e))}function uS(t,e,n,r,i,s){return lS(t.writeTree,t.treePath,e,n,r,i,s)}function Lu(t,e,n){return sS(t.writeTree,t.treePath,e,n)}function km(t,e){return Nm(ie(t.treePath,e),t.writeTree)}function Nm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;C(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),C(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ld(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,zw(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,jw(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ld(r,e.snapshotNode,i.oldSnap));else throw Er("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Im=new dS;class bu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Mu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lu(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xn(this.viewCache_),s=uS(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function fS(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function hS(t,e,n,r,i){const s=new cS;let o,l;if(n.type===ft.OVERWRITE){const u=n;u.source.fromUser?o=ka(t,e,u.path,u.snap,r,i,s):(C(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!F(u.path),o=no(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===ft.MERGE){const u=n;u.source.fromUser?o=mS(t,e,u.path,u.children,r,i,s):(C(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Na(t,e,u.path,u.children,r,i,l,s))}else if(n.type===ft.ACK_USER_WRITE){const u=n;u.revert?o=yS(t,e,u.path,r,i,s):o=gS(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===ft.LISTEN_COMPLETE)o=_S(t,e,n.path,r,s);else throw Er("Unknown operation type: "+n.type);const a=s.getChanges();return pS(e,o,a),{viewCache:o,changes:a}}function pS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Sa(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Fw(Sa(e)))}}function Tm(t,e,n,r,i,s){const o=e.eventCache;if(to(r,n)!=null)return e;{let l,a;if(F(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=xn(e),f=u instanceof U?u:U.EMPTY_NODE,c=xm(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=xa(r,xn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=L(n);if(u===".priority"){C(Xt(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=e.serverCache.getNode();const c=Wd(r,n,f,a);c!=null?l=t.filter.updatePriority(f,c):l=o.getNode()}else{const f=V(n);let c;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const d=Wd(r,n,o.getNode(),a);d!=null?c=o.getNode().getImmediateChild(u).updateChild(f,d):c=o.getNode().getImmediateChild(u)}else c=Lu(r,u,e.serverCache);c!=null?l=t.filter.updateChild(o.getNode(),u,c,f,i,s):l=o.getNode()}}return ni(e,l,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function no(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(F(n))u=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const _=a.getNode().updateChild(n,r);u=f.updateFullNode(a.getNode(),_,null)}else{const _=L(n);if(!a.isCompleteForPath(n)&&Xt(n)>1)return e;const y=V(n),k=a.getNode().getImmediateChild(_).updateChild(y,r);_===".priority"?u=f.updatePriority(a.getNode(),k):u=f.updateChild(a.getNode(),_,k,y,Im,null)}const c=vm(e,u,a.isFullyInitialized()||F(n),f.filtersNodes()),d=new bu(i,c,s);return Tm(t,c,n,i,d,l)}function ka(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const f=new bu(i,e,s);if(F(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=ni(e,u,!0,t.filter.filtersNodes());else{const c=L(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ni(e,u,l.isFullyInitialized(),l.isFiltered());else{const d=V(n),_=l.getNode().getImmediateChild(c);let y;if(F(d))y=r;else{const v=f.getCompleteChild(c);v!=null?Pu(d)===".priority"&&v.getChild(lm(d)).isEmpty()?y=v:y=v.updateChild(d,r):y=U.EMPTY_NODE}if(_.equals(y))a=e;else{const v=t.filter.updateChild(l.getNode(),c,y,d,f,o);a=ni(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function $d(t,e){return t.eventCache.isCompleteForChild(e)}function mS(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const f=ie(n,a);$d(e,L(f))&&(l=ka(t,l,f,u,i,s,o))}),r.foreach((a,u)=>{const f=ie(n,a);$d(e,L(f))||(l=ka(t,l,f,u,i,s,o))}),l}function Hd(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Na(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;F(n)?u=r:u=new Q(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(f.hasChild(c)){const _=e.serverCache.getNode().getImmediateChild(c),y=Hd(t,_,d);a=no(t,a,new $(c),y,i,s,o,l)}}),u.children.inorderTraversal((c,d)=>{const _=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!f.hasChild(c)&&!_){const y=e.serverCache.getNode().getImmediateChild(c),v=Hd(t,y,d);a=no(t,a,new $(c),v,i,s,o,l)}}),a}function gS(t,e,n,r,i,s,o){if(to(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(F(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return no(t,e,n,a.getNode().getChild(n),i,s,l,o);if(F(n)){let u=new Q(null);return a.getNode().forEachChild(ir,(f,c)=>{u=u.set(new $(f),c)}),Na(t,e,n,u,i,s,l,o)}else return e}else{let u=new Q(null);return r.foreach((f,c)=>{const d=ie(n,f);a.isCompleteForPath(d)&&(u=u.set(f,a.getNode().getChild(d)))}),Na(t,e,n,u,i,s,l,o)}}function _S(t,e,n,r,i){const s=e.serverCache,o=vm(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return Tm(t,o,n,r,Im,i)}function yS(t,e,n,r,i,s){let o;if(to(r,n)!=null)return e;{const l=new bu(r,e,i),a=e.eventCache.getNode();let u;if(F(n)||L(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=xa(r,xn(e));else{const c=e.serverCache.getNode();C(c instanceof U,"serverChildren would be complete if leaf node"),f=xm(r,c)}f=f,u=t.filter.updateFullNode(a,f,s)}else{const f=L(n);let c=Lu(r,f,e.serverCache);c==null&&e.serverCache.isCompleteForChild(f)&&(c=a.getImmediateChild(f)),c!=null?u=t.filter.updateChild(a,f,c,V(n),l,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(a,f,U.EMPTY_NODE,V(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=xa(r,xn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||to(r,W())!=null,ni(e,u,o,t.filter.filtersNodes())}}function vS(t,e){const n=xn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(L(e)).isEmpty())?n.getChild(e):null}function Vd(t,e,n,r){e.type===ft.MERGE&&e.source.queryId!==null&&(C(xn(t.viewCache_),"We should always have a full cache before handling merges"),C(Sa(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=hS(t.processor_,i,e,n,r);return fS(t.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,wS(t,s.changes,s.viewCache.eventCache.getNode())}function wS(t,e,n,r){const i=t.eventRegistrations_;return Kw(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;function SS(t){C(!Gd,"__referenceConstructor has already been defined"),Gd=t}function Fu(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return C(s!=null,"SyncTree gave us an op for an invalid query."),Vd(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Vd(o,e,n,r));return s}}function ju(t,e){let n=null;for(const r of t.views.values())n=n||vS(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd;function ES(t){C(!Kd,"__referenceConstructor has already been defined"),Kd=t}class Qd{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Q(null),this.pendingWriteTree_=aS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CS(t,e,n,r,i){return Xw(t.pendingWriteTree_,e,n,r,i),i?xo(t,new Cn(mm(),e,n)):[]}function Yn(t,e,n=!1){const r=Jw(t.pendingWriteTree_,e);if(Zw(t.pendingWriteTree_,e)){let s=new Q(null);return r.snap!=null?s=s.set(W(),!0):Fe(r.children,o=>{s=s.set(new $(o),!0)}),xo(t,new eo(r.path,s,n))}else return[]}function Co(t,e,n){return xo(t,new Cn(gm(),e,n))}function xS(t,e,n){const r=Q.fromObject(n);return xo(t,new Ii(gm(),e,r))}function kS(t,e,n,r){const i=Am(t,r);if(i!=null){const s=Om(i),o=s.path,l=s.queryId,a=Ye(o,e),u=new Cn(_m(l),a,n);return Mm(t,o,u)}else return[]}function NS(t,e,n,r){const i=Am(t,r);if(i){const s=Om(i),o=s.path,l=s.queryId,a=Ye(o,e),u=Q.fromObject(n),f=new Ii(_m(l),a,u);return Mm(t,o,f)}else return[]}function Rm(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Ye(o,e),u=ju(l,a);if(u)return u});return Cm(i,e,s,n,!0)}function xo(t,e){return Pm(e,t.syncPointTree_,null,Sm(t.pendingWriteTree_,W()))}function Pm(t,e,n,r){if(F(t.path))return Dm(t,e,n,r);{const i=e.get(W());n==null&&i!=null&&(n=ju(i,W()));let s=[];const o=L(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,f=km(r,o);s=s.concat(Pm(l,a,u,f))}return i&&(s=s.concat(Fu(i,t,r,n))),s}}function Dm(t,e,n,r){const i=e.get(W());n==null&&i!=null&&(n=ju(i,W()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=km(r,o),f=t.operationForChild(o);f&&(s=s.concat(Dm(f,l,a,u)))}),i&&(s=s.concat(Fu(i,t,r,n))),s}function Am(t,e){return t.tagToQueryMap.get(e)}function Om(t){const e=t.indexOf("$");return C(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}}function Mm(t,e,n){const r=t.syncPointTree_.get(e);C(r,"Missing sync point for query tag that we're tracking");const i=Sm(t.pendingWriteTree_,e);return Fu(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new zu(n)}node(){return this.node_}}class Uu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ie(this.path_,e);return new Uu(this.syncTree_,n)}node(){return Rm(this.syncTree_,this.path_)}}const IS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Yd=function(t,e,n){if(!t||typeof t!="object")return t;if(C(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return TS(t[".sv"],e,n);if(typeof t[".sv"]=="object")return RS(t[".sv"],e);C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},TS=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:C(!1,"Unexpected server value: "+t)}},RS=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&C(!1,"Unexpected increment value: "+r);const i=e.node();if(C(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},PS=function(t,e,n,r){return Bu(e,new Uu(n,t),r)},DS=function(t,e,n){return Bu(t,new zu(e),n)};function Bu(t,e,n){const r=t.getPriority().val(),i=Yd(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=Yd(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new ce(l,le(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ce(i))),o.forEachChild(_e,(l,a)=>{const u=Bu(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function $u(t,e){let n=e instanceof $?e:new $(e),r=t,i=L(n);for(;i!==null;){const s=pr(r.node.children,i)||{children:{},childCount:0};r=new Wu(i,r,s),n=V(n),i=L(n)}return r}function kr(t){return t.node.value}function Lm(t,e){t.node.value=e,Ia(t)}function bm(t){return t.node.childCount>0}function AS(t){return kr(t)===void 0&&!bm(t)}function ko(t,e){Fe(t.node.children,(n,r)=>{e(new Wu(n,t,r))})}function Fm(t,e,n,r){n&&e(t),ko(t,i=>{Fm(i,e,!0)})}function OS(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ji(t){return new $(t.parent===null?t.name:ji(t.parent)+"/"+t.name)}function Ia(t){t.parent!==null&&MS(t.parent,t.name,t)}function MS(t,e,n){const r=AS(n),i=mt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ia(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ia(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=/[\[\].#$\/\u0000-\u001F\u007F]/,bS=/[\[\].#$\u0000-\u001F\u007F]/,fl=10*1024*1024,Hu=function(t){return typeof t=="string"&&t.length!==0&&!LS.test(t)},jm=function(t){return typeof t=="string"&&t.length!==0&&!bS.test(t)},FS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jm(t)},zm=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!So(t)||t&&typeof t=="object"&&mt(t,".sv")},qd=function(t,e,n,r){No(mr(t,"value"),e,n)},No=function(t,e,n){const r=n instanceof $?new _w(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ln(r));if(typeof e=="function")throw new Error(t+"contains a function "+ln(r)+" with contents = "+e.toString());if(So(e))throw new Error(t+"contains "+e.toString()+" "+ln(r));if(typeof e=="string"&&e.length>fl/3&&wo(e)>fl)throw new Error(t+"contains a string greater than "+fl+" utf8 bytes "+ln(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Fe(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Hu(o)))throw new Error(t+" contains an invalid key ("+o+") "+ln(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yw(r,o),No(t,l,r),vw(r)}),i&&s)throw new Error(t+' contains ".value" child '+ln(r)+" in addition to actual children.")}},jS=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Ni(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Hu(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(gw);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&qe(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},zS=function(t,e,n,r){const i=mr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Fe(e,(o,l)=>{const a=new $(o);if(No(i,l,ie(n,a)),Pu(a)===".priority"&&!zm(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),jS(i,s)},US=function(t,e,n){if(So(e))throw new Error(mr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zm(e))throw new Error(mr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Um=function(t,e,n,r){if(!jm(n))throw new Error(mr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},BS=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Um(t,e,n)},os=function(t,e){if(L(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},WS=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hu(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!FS(n))throw new Error(mr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function HS(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!am(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Pn(t,e,n){HS(t,n),VS(t,r=>qe(r,e)||qe(e,r))}function VS(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(GS(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function GS(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ei&&me("event: "+n.toString()),Cr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="repo_interrupt",QS=25;class YS{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $S,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zs(),this.transactionQueueTree_=new Wu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qS(t,e,n){if(t.stats_=Tu(t.repoInfo_),t.forceRestClient_||B0())t.server_=new Js(t.repoInfo_,(r,i,s,o)=>{Xd(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Jd(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ge(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Et(t.repoInfo_,e,(r,i,s,o)=>{Xd(t,r,i,s,o)},r=>{Jd(t,r)},r=>{JS(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=G0(t.repoInfo_,()=>new Gw(t.stats_,t.server_)),t.infoData_=new Bw,t.infoSyncTree_=new Qd({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Co(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Vu(t,"connected",!1),t.serverSyncTree_=new Qd({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);Pn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function XS(t){const n=t.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bm(t){return IS({timestamp:XS(t)})}function Xd(t,e,n,r,i){t.dataUpdateCount++;const s=new $(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Ks(n,u=>le(u));o=NS(t.serverSyncTree_,s,a,i)}else{const a=le(n);o=kS(t.serverSyncTree_,s,a,i)}else if(r){const a=Ks(n,u=>le(u));o=xS(t.serverSyncTree_,s,a)}else{const a=le(n);o=Co(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Ku(t,s)),Pn(t.eventQueue_,l,o)}function Jd(t,e){Vu(t,"connected",e),e===!1&&eE(t)}function JS(t,e){Fe(e,(n,r)=>{Vu(t,n,r)})}function Vu(t,e,n){const r=new $("/.info/"+e),i=le(n);t.infoData_.updateSnapshot(r,i);const s=Co(t.infoSyncTree_,r,i);Pn(t.eventQueue_,r,s)}function ZS(t){return t.nextWriteId_++}function eE(t){Wm(t,"onDisconnectEvents");const e=Bm(t),n=Zs();wa(t.onDisconnect_,W(),(i,s)=>{const o=PS(i,s,t.serverSyncTree_,e);xr(n,i,o)});let r=[];wa(n,W(),(i,s)=>{r=r.concat(Co(t.serverSyncTree_,i,s));const o=lE(t,i);Ku(t,o)}),t.onDisconnect_=Zs(),Pn(t.eventQueue_,W(),r)}function tE(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&va(t.onDisconnect_,e),Ti(t,n,r,i)})}function Zd(t,e,n,r){const i=le(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&xr(t.onDisconnect_,e,i),Ti(t,r,s,o)})}function nE(t,e,n,r,i){const s=le(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,l)=>{o==="ok"&&xr(t.onDisconnect_,e,s),Ti(t,i,o,l)})}function rE(t,e,n,r){if(aa(n)){me("onDisconnect().update() called with empty data.  Don't do anything."),Ti(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&Fe(n,(o,l)=>{const a=le(l);xr(t.onDisconnect_,ie(e,o),a)}),Ti(t,r,i,s)})}function iE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(KS)}function Wm(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),me(n,...e)}function Ti(t,e,n,r){e&&Cr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function $m(t,e,n){return Rm(t.serverSyncTree_,e,n)||U.EMPTY_NODE}function Gu(t,e=t.transactionQueueTree_){if(e||Io(t,e),kr(e)){const n=Vm(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&sE(t,ji(e),n)}else bm(e)&&ko(e,n=>{Gu(t,n)})}function sE(t,e,n){const r=n.map(u=>u.currentWriteId),i=$m(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];C(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const c=Ye(e,f.path);s=s.updateChild(c,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Wm(t,"transaction put response",{path:a.toString(),status:u});let f=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,f=f.concat(Yn(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Io(t,$u(t.transactionQueueTree_,e)),Gu(t,t.transactionQueueTree_),Pn(t.eventQueue_,e,f);for(let d=0;d<c.length;d++)Cr(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{We("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}Ku(t,e)}},o)}function Ku(t,e){const n=Hm(t,e),r=ji(n),i=Vm(t,n);return oE(t,i,r),r}function oE(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Ye(n,a.path);let f=!1,c;if(C(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,c=a.abortReason,i=i.concat(Yn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=QS)f=!0,c="maxretry",i=i.concat(Yn(t.serverSyncTree_,a.currentWriteId,!0));else{const d=$m(t,a.path,o);a.currentInputSnapshot=d;const _=e[l].update(d.val());if(_!==void 0){No("transaction failed: Data returned ",_,a.path);let y=le(_);typeof _=="object"&&_!=null&&mt(_,".priority")||(y=y.updatePriority(d.getPriority()));const k=a.currentWriteId,p=Bm(t),h=DS(y,d,p);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=h,a.currentWriteId=ZS(t),o.splice(o.indexOf(k),1),i=i.concat(CS(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(Yn(t.serverSyncTree_,k,!0))}else f=!0,c="nodata",i=i.concat(Yn(t.serverSyncTree_,a.currentWriteId,!0))}Pn(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(d){setTimeout(d,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(c==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(c),!1,null))))}Io(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Cr(r[l]);Gu(t,t.transactionQueueTree_)}function Hm(t,e){let n,r=t.transactionQueueTree_;for(n=L(e);n!==null&&kr(r)===void 0;)r=$u(r,n),e=V(e),n=L(e);return r}function Vm(t,e){const n=[];return Gm(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Gm(t,e,n){const r=kr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ko(e,i=>{Gm(t,i,n)})}function Io(t,e){const n=kr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Lm(e,n.length>0?n:void 0)}ko(e,r=>{Io(t,r)})}function lE(t,e){const n=ji(Hm(t,e)),r=$u(t.transactionQueueTree_,e);return OS(r,i=>{hl(t,i)}),hl(t,r),Fm(r,i=>{hl(t,i)}),n}function hl(t,e){const n=kr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(C(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Yn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Lm(e,void 0):n.length=s+1,Pn(t.eventQueue_,ji(e),i);for(let o=0;o<r.length;o++)Cr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function uE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):We(`Invalid query segment '${n}' in query '${t}'`)}return e}const ef=function(t,e){const n=cE(t),r=n.namespace;n.domain==="firebase.com"&&Tt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Tt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O0();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new $(n.pathString)}},cE=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(f,c)),f<c&&(i=aE(t.substring(f,c)));const d=uE(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Lt;return tE(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){os("OnDisconnect.remove",this._path);const e=new Lt;return Zd(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){os("OnDisconnect.set",this._path),qd("OnDisconnect.set",e,this._path);const n=new Lt;return Zd(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){os("OnDisconnect.setWithPriority",this._path),qd("OnDisconnect.setWithPriority",e,this._path),US("OnDisconnect.setWithPriority",n);const r=new Lt;return nE(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){os("OnDisconnect.update",this._path),zS("OnDisconnect.update",e,this._path);const n=new Lt;return rE(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return F(this._path)?null:Pu(this._path)}get ref(){return new Dn(this._repo,this._path)}get _queryIdentifier(){const e=Fd(this._queryParams),n=Nu(e);return n==="{}"?"default":n}get _queryObject(){return Fd(this._queryParams)}isEqual(e){if(e=In(e),!(e instanceof Qu))return!1;const n=this._repo===e._repo,r=am(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+mw(this._path)}}class Dn extends Qu{constructor(e,n){super(e,n,new Ou,!1)}get parent(){const e=lm(this._path);return e===null?null:new Dn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function fE(t,e){return t=In(t),t._checkNotDeleted("ref"),e!==void 0?hE(t._root,e):t._root}function hE(t,e){return t=In(t),L(t._path)===null?BS("child","path",e):Um("child","path",e),new Dn(t._repo,ie(t._path,e))}function pE(t){return t=In(t),new dE(t._repo,t._path)}SS(Dn);ES(Dn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="FIREBASE_DATABASE_EMULATOR_HOST",Ta={};let gE=!1;function _E(t,e,n,r){t.repoInfo_=new Jp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function yE(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Tt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),me("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ef(s,i),l=o.repoInfo,a;typeof process<"u"&&yd&&(a=yd[mE]),a?(s=`http://${a}?ns=${l.namespace}`,o=ef(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new $0(t.name,t.options,e);WS("Invalid Firebase Database URL",o),F(o.path)||Tt("Database URL must point to the root of a Firebase Database (not including a child path).");const f=wE(l,t,u,new W0(t.name,n));return new SE(f,t)}function vE(t,e){const n=Ta[e];(!n||n[t.key]!==t)&&Tt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),iE(t),delete n[t.key]}function wE(t,e,n,r){let i=Ta[e.name];i||(i={},Ta[e.name]=i);let s=i[t.toURLString()];return s&&Tt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new YS(t,gE,n,r),i[t.toURLString()]=s,s}class SE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dn(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Tt("Cannot call "+e+" on a deleted database.")}}function EE(t=Mp(),e){const n=Op(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=kp("database");r&&CE(n,...r)}return n}function CE(t,e,n,r={}){t=In(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Tt("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Tt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ws(ws.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Yy(r.mockUserToken,t.app.options.projectId);s=new ws(o)}_E(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){I0(l0),Ci(new gr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return yE(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),gn(vd,wd,t),gn(vd,wd,"esm2017")}Et.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Et.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};xE();const tf={apiKey:"AIzaSyDgEuge-mEYxj3yleytNqXdHaVLp9QMXls",authDomain:"jaballahchat.firebaseapp.com",projectId:"jaballahchat",storageBucket:"jaballahchat.appspot.com",messagingSenderId:"132290046194",appId:"1:132290046194:web:b74f8e8c8d0a8b1f0b8c9d",databaseURL:"https://jaballahchat-default-rtdb.firebaseio.com"};function kE(t){return Object.values(t).every(e=>e!=null&&e!==""&&!e.includes("YOUR_"))}let Mn=null,Hr=null;try{if(!kE(tf))throw new Error("Firebase configuration is invalid. Please check your .env file.");Mn=Zm(tf)}catch(t){console.error("Firebase initialization failed:",t),Hr=t}let Pe=null,D=null,Ra=null;const ze=ng;Mn?(Pe=Qm(Mn),D=eg(Mn),Ra=rg(Mn),k0(Mn),tg(D).catch(t=>{console.error("Firestore persistence error:",t),t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):t.code==="unimplemented"&&console.warn("The current browser does not support persistence.")})):console.warn("Firebase not initialized — continuing without Firebase. Check console for details.");if(!D)throw new Error("Firestore is not initialized. Check your Firebase configuration.");const NE=EE();Pe&&D&&rf(Pe,async t=>{var e;if(t){const n=sr(D,"presence",t.uid),r=sr(D,"users",t.uid);try{await ls(n,{online:!0,lastSeen:ze(),email:t.email}),await ls(r,{email:t.email,displayName:t.displayName||((e=t.email)==null?void 0:e.split("@")[0]),photoURL:t.photoURL,createdAt:ze(),lastSeen:ze()},{merge:!0});try{const i=fE(NE,`presence/${t.uid}`);pE(i).remove()}catch(i){console.warn("onDisconnect not supported in browser SDK emulator mode",i)}window.addEventListener("beforeunload",async()=>{try{await ls(r,{lastSeen:ze()},{merge:!0}),await qn(n)}catch(i){console.warn("Error updating presence on unload",i)}})}catch(i){console.error("Error updating presence/user profile:",i)}}});function IE(){const[t,e]=P.useState(!1),[n,r]=P.useState(""),[i,s]=P.useState(""),[o,l]=P.useState(null),[a,u]=P.useState(!1),[f,c]=P.useState(null);P.useEffect(()=>{if(!Pe){c("Firebase Authentication is not initialized properly. Check your configuration.");return}try{Pe.languageCode="en"}catch(y){c("Firebase configuration error: "+y.message)}},[]);async function d(y){y.preventDefault(),l(null),u(!0);try{if(!n.trim()||!i.trim())throw new Error("Email and password are required");if(i.length<6)throw new Error("Password must be at least 6 characters");if(!Pe)throw new Error("Firebase Authentication is not initialized.");t?await Ym(Pe,n,i):await qm(Pe,n,i)}catch(v){let k=v.message;k.includes("auth/invalid-email")?k="Invalid email address":k.includes("auth/wrong-password")?k="Incorrect password":k.includes("auth/email-already-in-use")?k="Email is already registered":k.includes("auth/user-not-found")&&(k="No account found with this email"),l(k)}finally{u(!1)}}async function _(){l(null),u(!0);try{if(!Pe)throw new Error("Firebase Authentication is not initialized.");const y=new Xm;await Jm(Pe,y)}catch(y){l("Failed to sign in with Google: "+y.message)}finally{u(!1)}}return f?m.jsxs("div",{className:"p-6 bg-red-100 rounded shadow border-2 border-red-400",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-700",children:"Configuration Error"}),m.jsx("p",{className:"text-red-600",children:f}),m.jsx("p",{className:"mt-4 text-red-500",children:"Please check your Firebase configuration in .env file"})]}):m.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg shadow-xl text-white",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:t?"Create Account":"Welcome Back"}),m.jsxs("button",{onClick:_,className:"w-full mb-4 px-4 py-3 bg-white text-gray-800 rounded-lg flex items-center justify-center space-x-2 hover:bg-gray-100 transition-colors",disabled:a,children:[m.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5"}),m.jsx("span",{children:"Continue with Google"})]}),m.jsxs("div",{className:"relative my-6",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-600"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",children:"Or continue with email"})})]}),m.jsxs("form",{onSubmit:d,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),m.jsx("input",{type:"email",className:"w-full p-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter your email",value:n,onChange:y=>r(y.target.value),disabled:a})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),m.jsx("input",{type:"password",className:"w-full p-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter your password",value:i,onChange:y=>s(y.target.value),disabled:a})]}),o&&m.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400",children:o}),m.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold ${a?"bg-blue-600/50 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500"}`,disabled:a,children:a?"Please wait...":t?"Create Account":"Sign In"}),m.jsx("button",{type:"button",className:"w-full text-sm text-gray-400 hover:text-white",onClick:()=>e(y=>!y),disabled:a,children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})]})]})}function TE({user:t}){const[e,n]=P.useState([]),[r,i]=P.useState(""),[s,o]=P.useState(null),[l,a]=P.useState(!1),u=P.useRef(null);P.useEffect(()=>{if(!D)return;const d=hn(Ce(D,"messages"),Ss("timestamp","desc"),sf(50)),_=or(d,y=>{const v=[];y.forEach(k=>{v.push({id:k.id,...k.data()})}),n(v.reverse()),setTimeout(()=>{var k;return(k=u.current)==null?void 0:k.scrollIntoView({behavior:"smooth"})},100)});return()=>_()},[]);const f=async d=>{var _;if(d.preventDefault(),!(!r.trim()&&!s)&&!(!D||!Ra))try{let y="",v="";if(s){a(!0);const k=ig(Ra,`files/${s.name}`);await sg(k,s),y=await og(k),v=s.type}await an(Ce(D,"messages"),{text:r.trim(),sender:t.uid,senderName:t.displayName||((_=t.email)==null?void 0:_.split("@")[0]),timestamp:ze(),fileURL:y,fileType:v}),i(""),o(null),a(!1)}catch(y){console.error("Error sending message:",y),a(!1)}},c=d=>{var _;(_=d.target.files)!=null&&_[0]&&o(d.target.files[0])};return m.jsxs("div",{className:"flex flex-col h-[70vh]",children:[m.jsx("div",{className:"bg-gray-800 p-4",children:m.jsx("h2",{className:"text-xl font-bold text-white",children:"Chat"})}),m.jsx("div",{ref:u,className:"flex-1 overflow-auto p-4 space-y-4",children:e.map(d=>{var _;return m.jsx("div",{className:`flex ${d.sender===t.uid?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${d.sender===t.uid?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[m.jsx("div",{className:"text-sm opacity-75 mb-1",children:d.senderName}),d.text&&m.jsx("p",{children:d.text}),d.fileURL&&((_=d.fileType)!=null&&_.startsWith("image/")?m.jsx("img",{src:d.fileURL,alt:"Uploaded content",className:"max-w-full rounded-lg mt-2"}):m.jsx("a",{href:d.fileURL,target:"_blank",rel:"noopener noreferrer",className:"text-blue-200 underline",children:"Download File"}))]})},d.id)})}),m.jsx("form",{onSubmit:f,className:"p-4 bg-gray-800",children:m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:"Type a message...",className:"flex-1 rounded-lg px-4 py-2 bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l}),m.jsxs("label",{className:"cursor-pointer",children:[m.jsx("input",{type:"file",onChange:c,className:"hidden",disabled:l}),m.jsx("div",{className:"p-2 rounded-lg bg-gray-700 text-white hover:bg-gray-600",children:s?"📎 Selected":"📎"})]}),m.jsx("button",{type:"submit",disabled:l||!r.trim()&&!s,className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Uploading...":"Send"})]})})]})}function nf({user:t,isLeaderPoll:e=!1}){const[n,r]=P.useState([]),[i,s]=P.useState(""),[o,l]=P.useState(""),[a,u]=P.useState("1");P.useEffect(()=>{if(!D)return;const d=hn(Ce(D,"polls"),ii("isLeaderPoll","==",e),Ss("createdAt","desc"),sf(5));return or(d,_=>{const y=qu.now(),v=_.docs.map(k=>({...k.data(),id:k.id})).filter(k=>!k.expiresAt||k.expiresAt.toMillis()>y.toMillis());r(v)})},[e]);async function f(d){if(d.preventDefault(),!D)return;const _=o.split(`
`).map(p=>p.trim()).filter(Boolean);if(!i.trim()||_.length<2)return;const y=parseInt(a),v=new Date;v.setHours(v.getHours()+y);const k={question:i.trim(),choices:_,createdAt:ze(),admin:t.uid,isLeaderPoll:e,expiresAt:qu.fromDate(v)};await an(Ce(D,"polls"),k),s(""),l(""),u("1")}async function c(d){D&&window.confirm("Are you sure you want to delete this poll?")&&await qn(sr(D,"polls",d))}return m.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg text-white",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:e?"Leader Election":"Polls"}),m.jsxs("form",{onSubmit:f,className:"space-y-3 mb-6",children:[m.jsx("div",{children:m.jsx("input",{value:i,onChange:d=>s(d.target.value),placeholder:e?"Who should be the leader?":"Question",className:"w-full p-3 bg-gray-700 rounded-lg text-white placeholder-gray-400"})}),m.jsx("div",{children:m.jsx("textarea",{value:o,onChange:d=>l(d.target.value),placeholder:"One choice per line",rows:4,className:"w-full p-3 bg-gray-700 rounded-lg text-white placeholder-gray-400"})}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("select",{value:a,onChange:d=>u(d.target.value),className:"w-full p-3 bg-gray-700 rounded-lg text-white",children:[m.jsx("option",{value:"1",children:"1 hour"}),m.jsx("option",{value:"2",children:"2 hours"}),m.jsx("option",{value:"4",children:"4 hours"}),m.jsx("option",{value:"8",children:"8 hours"}),m.jsx("option",{value:"24",children:"24 hours"})]})}),m.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500",children:"Create Poll"})]})]}),m.jsxs("div",{className:"space-y-4",children:[n.map(d=>m.jsx(RE,{poll:d,user:t,onDelete:d.admin===t.uid?c:void 0},d.id)),n.length===0&&m.jsx("div",{className:"text-center text-gray-400 py-4",children:"No active polls"})]})]})}function RE({poll:t,user:e,onDelete:n}){const[r,i]=P.useState({}),[s,o]=P.useState(null),[l,a]=P.useState(0);P.useEffect(()=>{if(!D)return;const c=Ce(D,"polls",t.id,"votes");return or(c,d=>{const _={};let y=null,v=0;d.docs.forEach(k=>{const p=k.data(),h=p.choice;_[h]=(_[h]||0)+1,v++,p.uid===e.uid&&(y=p.choice)}),i(_),a(v),o(y)})},[t.id,e.uid]);async function u(c){if(!D||s)return;const d=sr(D,"polls",t.id,"votes",e.uid);await ls(d,{uid:e.uid,choice:c,createdAt:ze(),email:e.email||null})}const f=t.expiresAt?new Date(t.expiresAt.toMillis()).getTime()-Date.now():0;return m.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsx("h4",{className:"text-lg font-medium",children:t.question}),n&&m.jsx("button",{onClick:()=>n(t.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]}),m.jsx("div",{className:"space-y-3",children:t.choices.map(c=>{const d=r[c]||0,_=l>0?d/l*100:0;return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{children:c}),m.jsxs("span",{className:"text-sm text-gray-400",children:[d," votes (",_.toFixed(1),"%)"]})]}),m.jsx("div",{className:"relative h-2 bg-gray-600 rounded-full",children:m.jsx("div",{className:"absolute left-0 top-0 h-full bg-blue-500 rounded-full",style:{width:`${_}%`}})}),!s&&m.jsx("button",{onClick:()=>u(c),className:"mt-1 text-sm text-blue-400 hover:text-blue-300",children:"Vote"}),s===c&&m.jsx("span",{className:"mt-1 text-sm text-green-400",children:"Your vote"})]},c)})}),t.expiresAt&&m.jsx("div",{className:"mt-4 text-sm text-gray-400",children:f>0?`Expires in ${Math.ceil(f/1e3/60)} minutes`:"Poll has ended"})]})}function PE({user:t}){const[e,n]=P.useState(null),[r,i]=P.useState(!1),s=P.useRef(null);async function o(){if(!D){console.error("Firestore is not initialized.");return}try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Media devices not available in this browser");const a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});n(a),s.current&&(s.current.srcObject=a),i(!0)}catch(a){console.error("Error starting call:",a),alert("Failed to access camera and microphone. Please make sure you have granted permission and have the devices connected.")}}async function l(){if(!D){console.error("Firestore is not initialized.");return}e==null||e.getTracks().forEach(a=>a.stop()),n(null),i(!1)}return m.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow-lg p-4",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Video Call"}),r?m.jsxs("div",{className:"space-y-4",children:[m.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg bg-black"}),m.jsx("button",{onClick:l,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"End Call"})]}):m.jsx("button",{onClick:o,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Start Call"})]})}function DE({user:t,isAdmin:e}){const[n,r]=P.useState([]),[i,s]=P.useState(""),[o,l]=P.useState(!1),[a,u]=P.useState(""),[f,c]=P.useState(null),[d,_]=P.useState(!0),[y,v]=P.useState("");P.useEffect(()=>{if(!D){c("Database not initialized");return}const E=hn(Ce(D,"posts"),Ss("createdAt","desc")),x=or(E,O=>{r(O.docs.map(we=>({id:we.id,...we.data()})))}),R=hn(Ce(D,"chat-status"),Ss("updatedAt","desc"),ii("updatedAt",">",ze())),X=or(R,O=>{if(!O.empty){const we=O.docs[0].data();_(we.enabled)}});return()=>{x(),X()}},[]);async function k(E){if(E.preventDefault(),!!i.trim()){if(!D){c("Database not initialized");return}try{await an(Ce(D,"posts"),{content:i.trim(),createdAt:ze(),createdBy:t.uid,authorEmail:t.email,type:o?"announcement":"post"}),s(""),l(!1)}catch(x){c(x.message)}}}async function p(E){if(!D){c("Database not initialized");return}try{await qn(sr(D,"posts",E))}catch(x){c(x.message)}}async function h(){if(e){if(!D){c("Database not initialized");return}try{(await pl(Ce(D,"messages"))).docs.forEach(async x=>{const R={id:x.id,...x.data()};R.id&&D&&await qn(sr(D,"messages",R.id))}),alert("Chat cleared successfully!")}catch(E){c(E.message),alert("Error clearing chat")}}}async function g(){if(!e||!D){c("Database not initialized");return}try{await an(Ce(D,"chat-status"),{enabled:!d,updatedAt:ze(),updatedBy:t.uid}),_(!d),alert(`Chat has been ${d?"disabled":"enabled"}`)}catch(E){c(E.message)}}async function w(){if(!(!e||!y.trim()||!D))try{await an(Ce(D,"timeouts"),{userId:y,createdAt:ze(),createdBy:t.uid,expiresAt:new Date(Date.now()+5*60*1e3)}),alert("User has been timed out for 5 minutes"),v("")}catch(E){c(E.message)}}async function N(){if(!D){c("Database not initialized");return}try{const E=Ce(D,"admin-codes"),x=hn(E,ii("code","==",a)),R=await pl(x);if(R.empty){c("Invalid code");return}await an(Ce(D,"admins"),{uid:t.uid,email:t.email,grantedAt:ze()}),await qn(R.docs[0].ref),u(""),c("Admin access granted!")}catch(E){c(E.message)}}return m.jsxs("div",{className:"space-y-6",children:[e&&m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[m.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-rounded",children:"admin_panel_settings"}),"Admin Panel"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[m.jsx("span",{className:"material-symbols-rounded",children:"delete_sweep"}),"Clear All Chat"]}),m.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-white transition-colors ${d?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:[m.jsx("span",{className:"material-symbols-rounded",children:d?"toggle_off":"toggle_on"}),d?"Disable Chat":"Enable Chat"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"timeoutUser",className:"block",children:"Timeout User (UID):"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("input",{id:"timeoutUser",type:"text",value:y,onChange:E=>v(E.target.value),placeholder:"User UID",className:"flex-1 p-2 border rounded-lg"}),m.jsx("button",{onClick:w,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Timeout"})]})]})]}),f&&m.jsx("div",{className:"mt-4 text-sm text-red-600",children:f})]}),!e&&m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Redeem Admin Code"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("input",{type:"text",value:a,onChange:E=>u(E.target.value),placeholder:"Enter admin code",className:"flex-1 p-2 border rounded-lg"}),m.jsx("button",{onClick:N,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Redeem"})]}),f&&m.jsx("p",{className:"mt-2 text-sm text-red-600",children:f})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Posts & Announcements"}),m.jsxs("form",{onSubmit:k,className:"space-y-4 mb-6",children:[m.jsx("textarea",{value:i,onChange:E=>s(E.target.value),placeholder:"Write a post...",className:"w-full p-2 border rounded-lg min-h-[100px]"}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:o,onChange:E=>l(E.target.checked),className:"rounded text-blue-600"}),m.jsx("span",{children:"Post as Announcement"})]}),m.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Post"})]})]}),m.jsx("div",{className:"space-y-4",children:n.map(E=>{var x;return m.jsx("div",{className:`p-4 rounded-lg ${E.type==="announcement"?"bg-yellow-50 border border-yellow-200":"bg-gray-50 border border-gray-200"}`,children:m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[E.authorEmail," • ",new Date((x=E.createdAt)==null?void 0:x.toDate()).toLocaleString()]}),m.jsx("p",{className:"whitespace-pre-wrap",children:E.content})]}),(e||E.createdBy===t.uid)&&m.jsx("button",{onClick:()=>p(E.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})},E.id)})})]})]})}function AE({user:t,onSuccess:e,onClose:n}){const[r,i]=P.useState(""),[s,o]=P.useState(null),[l,a]=P.useState(!1);async function u(){if(!D||!r.trim()){o("Please enter a code");return}a(!0),o(null);try{const f=Ce(D,"admin-codes"),c=hn(f,ii("code","==",r.trim())),d=await pl(c);if(d.empty){o("Invalid code");return}await an(Ce(D,"admins"),{uid:t.uid,email:t.email,grantedAt:ze()}),await qn(d.docs[0].ref),i(""),e()}catch(f){o(f.message)}finally{a(!1)}}return m.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl max-w-md w-full mx-4 shadow-2xl",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Enter Admin Code"}),m.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"Enter admin code",className:"w-full p-3 border rounded-lg mb-4 text-gray-800",disabled:l}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{onClick:u,disabled:l,className:"flex-1 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:l?"Redeeming...":"Redeem"}),m.jsx("button",{onClick:n,disabled:l,className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel"})]}),s&&m.jsx("p",{className:"mt-3 text-sm text-red-600",children:s})]})})}function OE(){if(Hr)return m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center text-white",children:m.jsxs("div",{className:"max-w-xl p-6 bg-red-900/80 rounded-lg",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Configuration error"}),m.jsx("p",{className:"mb-4",children:"Firebase failed to initialize. Check the .env file and console for details."}),m.jsx("pre",{className:"text-sm bg-black/30 p-3 rounded",children:String(Hr)})]})});const[t,e]=zy(Pe),[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,l]=P.useState("chat");return P.useEffect(()=>{if(!t||!D)return;const a=Ce(D,"admins"),u=hn(a,ii("uid","==",t.uid));return or(u,c=>{r(!c.empty)})},[t]),e?m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):Hr?m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center text-white",children:m.jsxs("div",{className:"max-w-xl p-6 bg-red-900/80 rounded-lg",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Configuration error"}),m.jsx("p",{className:"mb-4",children:"Firebase failed to initialize. Check the .env file and console for details."}),m.jsx("pre",{className:"text-sm bg-black/30 p-3 rounded",children:String(Hr)})]})}):m.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[i&&t&&m.jsx(AE,{user:t,onSuccess:()=>{s(!1),r(!0)},onClose:()=>s(!1)}),t?m.jsxs("div",{className:"h-screen flex flex-col",children:[m.jsx("nav",{className:"bg-gray-800 px-4 py-3",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:()=>l("chat"),className:`px-4 py-2 rounded-lg transition-colors ${o==="chat"?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:"Chat & Polls"}),m.jsx("button",{onClick:()=>l("video"),className:`px-4 py-2 rounded-lg transition-colors ${o==="video"?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:"Video Call"}),n&&m.jsx("button",{onClick:()=>l("admin"),className:`px-4 py-2 rounded-lg transition-colors ${o==="admin"?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:"Admin Panel"})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("span",{className:"text-gray-300",children:t.email}),!n&&m.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-500",children:"Become Admin"}),m.jsx("button",{onClick:()=>Pe==null?void 0:Pe.signOut(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500",children:"Sign Out"})]})]})}),m.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o==="chat"&&m.jsx("div",{className:"flex-1 flex overflow-hidden",children:m.jsxs("div",{className:"flex-1 flex",children:[m.jsx("div",{className:"flex-1 flex flex-col",children:m.jsx(TE,{user:t})}),m.jsxs("div",{className:"w-80 p-4 space-y-4 overflow-y-auto",children:[m.jsx(nf,{user:t}),m.jsx(nf,{user:t,isLeaderPoll:!0})]})]})}),o==="video"&&m.jsx("div",{className:"flex-1 p-4",children:m.jsx(PE,{user:t})}),o==="admin"&&n&&m.jsx("div",{className:"flex-1 p-4",children:m.jsx(DE,{user:t,isAdmin:n})})]})]}):m.jsx("div",{className:"max-w-md mx-auto p-6 pt-12",children:m.jsx(IE,{})})]})}yp(document.getElementById("root")).render(m.jsx(Cg.StrictMode,{children:m.jsx(OE,{})}));
